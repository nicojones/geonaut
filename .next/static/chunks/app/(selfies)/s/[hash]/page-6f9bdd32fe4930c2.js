(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[220],{61066:function(e,n,t){Promise.resolve().then(t.bind(t,27776)),Promise.resolve().then(t.bind(t,27421)),Promise.resolve().then(t.bind(t,19649)),Promise.resolve().then(t.bind(t,20061))},20061:function(e,n,t){"use strict";t.d(n,{SingleSelfieContextWrapper:function(){return h}});var r=t(57437),s=t(2265);t(74590);var l=(0,t(58064).$)("e4af2e0703b305da595db477e8db970b29c70bc0"),o=t(42874),i=t(50461),u=t(70603);let h=e=>{let{children:n,initialData:t}=e,[h,a]=(0,s.useState)(t),{api:c,user:d}=(0,i.useJwtTokenContext)(),[f,b]=(0,s.useState)({prev:null,next:null}),{prev:v,next:p}=f,w=(0,s.useRef)({[t.hash]:t}),x=(0,s.useCallback)(e=>{if(w.current[e]){a(w.current[e]),window.history.pushState(null,"","/s/".concat(e));return}l(e,null==d?void 0:d.id,!0).then(n=>{if(n)w.current[n.hash]=n,a(n),window.history.pushState(null,"","/s/".concat(e));else throw Error("No selfie with hash ".concat(e))})},[null==d?void 0:d.id]);(0,s.useEffect)(()=>{let e=new AbortController;return c({body:{},url:"/api/next/".concat(h.hash),cacheTags:[h.hash],signal:e.signal}).then(o.xO).then(e=>{let{prev:n,next:t}=e;n&&(w.current[n.hash]=n),t&&(w.current[t.hash]=t),b({prev:n,next:t})}),()=>e.abort()},[c,h.hash]);let _=(0,s.useMemo)(()=>({prev:v,next:p,selfie:h,loadSelfie:x,_insideContext_:!0}),[v,p,h,x]);return(0,r.jsx)(u.R.Provider,{value:_,children:n})}}},function(e){e.O(0,[529,706,415,119,46,247,428,191,794,971,23,744],function(){return e(e.s=61066)}),_N_E=e.O()}]);