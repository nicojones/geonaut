(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[794],{3258:function(e,s,t){"use strict";t.d(s,{w:function(){return r},s:function(){return l}});var l=t(47993),r=t(65143)},4171:function(e,s,t){"use strict";t.r(s),t.d(s,{EditSelfieForm:function(){return ee}});var l=t(57437),r=t(87282),a=t(16463),n=t(2265),i=t(27776),c=t(70191),o=t(42874),d=t(67185),u=t(93122),h=t(77699),x=t(96442),m=t(37585),f=t(23247),p=t(98920),j=t(57002),g=t(89649),v=t(57818);let A=(e,s)=>{let t=2*Math.random()*Math.PI,l=Math.random()*e;return[l*Math.sin(t)/111320,l*Math.cos(t)/(40075e3*Math.cos(s*Math.PI/180)/360)]};var b=t(56800),w=t.n(b);let N=()=>{let{api:e}=(0,c.Rv)(),{data:s,setSelfieData:t}=(0,c.dV)(),[r,a]=(0,n.useState)(s.selfie.url||s.selfie.hash),[d,u]=(0,n.useState)(void 0),h=(0,n.useRef)();return(0,l.jsxs)("div",{className:w()("fric text-xs subtle-hover",{"!text-red-500":d},{"!text-green-500":!1===d}),children:[(0,l.jsxs)("span",{children:["https://travel.kupfer.es","/s/"]}),(0,l.jsx)("input",{value:r,onChange:l=>{var r;clearTimeout(h.current);let n=(null!==(r=l.target.value)&&void 0!==r?r:"").trim();if(a(n),0===n.length||n===s.selfie.hash){u(void 0);return}n.length<5||(h.current=setTimeout(()=>{e({url:"/api/check-url",body:{hash:s.selfie.hash,url:n}}).then(o.xO).then(e=>{t({...s.selfie,url:n}),u(!1)}).catch(e=>{u(!0),t({url:void 0}),i.toast.error(String(e))})},1e3))},className:"bg-transparent text-xs border-none w-16 outline-none focus:outline-none",placeholder:s.selfie.hash})]})};var y=t(44091),Z=t(73356),S=t(88410),k=t(32367);let C=e=>{let{disabled:s=!1,acceptTypes:t=k.HW,onFileAdded:r,isUploading:a=!1,children:c,className:d=""}=e,[u,h]=(0,n.useState)(!1),x=(0,n.useCallback)(e=>{h(e)},[]),m=(0,n.useCallback)(e=>{x(!1),(null==e?void 0:e.length)?r(e):i.toast.error("You didn't add any files")},[x,r]);return(0,l.jsxs)("label",{className:w()("border-2 border-dashed group cursor-pointer rounded-lg w-full p-4 transition-colors",u?"border-purple-300/30 bg-purple-300/20":"",(0,o.Ij)({loading:a,spinner:!0}),d),"data-loading":"uploading...",onDragEnter:()=>{x(!0)},onDragLeave:()=>{x(!1)},onDragEnd:()=>{x(!1)},onDragOver:e=>{e.preventDefault(),e.stopPropagation(),x(!0)},onDrop:e=>{e.preventDefault(),e.stopPropagation(),m(e.dataTransfer.files)},children:[c,(0,l.jsx)("input",{disabled:s,type:"file",onChange:e=>m(e.target.files),accept:t?Object.keys(t).join(","):"*",className:"fixed -left-[10000px] h-0 w-0"})]})},z=function(e,s){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{...e,lat:s.lat||e.lat,lng:s.lng||e.lng,place:t?(0,o.r7)(s):e.place||(0,o.r7)(s)}},E=(e,s)=>{let t=new FileReader;t.onloadend=()=>{let e=new Image;e.addEventListener("load",function(){s(t.result)}),e.src=t.result},t.readAsDataURL(e)},D=e=>{let{className:s="",onUseImage:t,onUploadComplete:r}=e,{api:a}=(0,c.Rv)(),{data:d,hash:u}=(0,c.dV)(),[x,m]=(0,n.useState)(d.attachments),f=(0,n.useCallback)(e=>{var s,t;let l=e[0];if(!(null==l?void 0:l.type.startsWith("image/"))){i.toast.error("Invalid image type!");return}let n=null!==(s=l.name.split(".").pop())&&void 0!==s?s:"",c=null!==(t=prompt("Name for the file? ".concat(n?"(.".concat(n,")"):""),l.name))&&void 0!==t?t:l.name;c.endsWith(".".concat(n))||(c+=".".concat(n)),E(l,e=>{m(e=>[...e,null]);let s=new FormData;s.append("_file_",l),s.append("hash",u),s.append("type",c);let t=a({method:"POST",body:s,url:"/api/upload-attachment",contentType:!1}).then(o.xO).then(e=>(m(s=>[...s.filter(Boolean),e.attachment]),null==r||r(e.attachment),e));i.toast.promise(t,{success:e=>e.message,error:e=>e.message})})},[a,u,r]),p=(0,n.useCallback)(e=>{if(confirm("this image will be deleted.\n\nplease delete any references to it in the description!")){let s=a({method:"POST",url:"/api/delete-attachment",body:{hash:u,src:e}}).then(o.xO).then(s=>(m(s=>[...s.filter(s=>s!==e)]),s));i.toast.promise(s,{success:e=>e.message,error:e=>e.message})}},[a,u]);return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{className:"flex flex-col space-y-2 py-4",children:[x.map(e=>e&&(0,l.jsxs)("div",{className:"fric space-x-4",children:[(0,l.jsx)(S.ZP,{color:"danger",onClick:()=>p(e),title:"delete",children:(0,l.jsx)(h.Z,{className:"size-5"})}),(0,l.jsxs)(g.Z,{onClick:()=>t(d.attachmentPrefix+e),title:"use",variant:"plain",endDecorator:(0,l.jsx)(y.Z,{className:"size-5"}),className:"flex gap-4 items-center",children:[(0,l.jsx)("div",{className:"aspect-square h-16 bg-no-repeat bg-center bg-cover rounded-sm",style:{backgroundImage:"url(".concat("https://travel-api.kupfer.es"+d.attachmentPrefix+e,")")}}),(0,l.jsx)("pre",{className:"text-secondary",children:e.split("attachment_").pop()})]})]},e)),(0,l.jsx)(C,{onFileAdded:f,className:s,children:null===(0,o.jA)(x)?(0,l.jsxs)("div",{className:"text-inset-shadow text-sm fric space-x-2",children:[(0,l.jsx)("span",{children:"Uploading..."}),(0,l.jsx)(Z.Z,{className:"size-4 animate-pulse"})]}):(0,l.jsx)("div",{className:"text-inset-shadow text-sm",children:"Click or drop an image here to add it to the description"})})]})})},P=(0,v.default)(()=>Promise.all([t.e(523),t.e(202),t.e(263)]).then(t.bind(t,18263)).then(e=>e.QuillEditor),{loadableGenerated:{webpack:()=>[18263]},ssr:!1}),T=e=>{let{error:s,onChange:t,value:r}=e,a=(0,n.useRef)(),[i,c]=(0,n.useState)([0,0]),o=(0,n.useRef)(null),d=e=>{a.current.insertEmbed(i[0],"image","".concat("https://travel-api.kupfer.es").concat(e))};return(0,l.jsxs)(m.Z,{error:!!s,children:[(0,l.jsx)(f.Z,{children:"description"}),(0,l.jsx)(P,{ref:a,defaultValue:r,onSelectionChange:(e,s)=>{s?c([s.index,s.index+s.length]):c([0,0])},onTextChange:()=>{clearTimeout(o.current),o.current=setTimeout(()=>{t(a.current.getSemanticHTML())},300)}}),s&&(0,l.jsx)(j.Z,{children:s}),(0,l.jsx)("br",{}),(0,l.jsx)(D,{onUseImage:d,onUploadComplete:d})]})};var M=t(1387),_=t(76192),R=t(72990),F=t(13076),L=t(50799),I=t(19041);let O={access_token:"pk.eyJ1Ijoibmljb2pvbmVzIiwiYSI6ImNqYjhvejQxNjA1eXkzMm9mcTljanBubGcifQ.WM7Ry1e1-1liibdD7PSNsA",session_token:(0,o.HP)()},Q=e=>{let{onUpdateCoords:s}=e,{data:t}=(0,c.dV)(),[r,a]=(0,n.useState)([]),d=(0,n.useRef)(null),u=e=>{clearTimeout(d.current),d.current=setTimeout(()=>{e.length<3||fetch("https://api.mapbox.com/search/searchbox/v1/suggest".concat((0,o.L7)({q:e,...O}))).then(e=>e.json()).then(e=>{a(e.suggestions)}).catch(e=>{i.toast.error(String(e))})},300)},h=e=>{if(null===e||"string"==typeof e)return;let l={...O,...t.selfie.lat&&t.selfie.lng?{proximity:"".concat(t.selfie.lng,",").concat(t.selfie.lat)}:{}};fetch("https://api.mapbox.com/search/searchbox/v1/retrieve/".concat(e.mapbox_id).concat((0,o.L7)(l))).then(e=>e.json()).then(e=>{let[t,l]=e.features[0].geometry.coordinates;s(e.features[0].properties.full_address,{lat:l,lng:t})}).catch(e=>{i.toast.error(String(e))})};return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(R.Z,{inputValue:t.selfie.place,onInputChange:(e,t)=>{u(t),s(t)},options:r,autoHighlight:!0,onChange:(e,s)=>h(s),freeSolo:!0,getOptionLabel:e=>"string"==typeof e?e:e.name,getOptionKey:e=>"string"==typeof e?e:e.mapbox_id,renderOption:(e,s)=>(0,l.jsxs)(F.Z,{...e,children:[(0,l.jsx)(L.Z,{children:"poi"===s.feature_type?(0,l.jsx)(M.Z,{className:"size-4"}):(0,l.jsx)(_.Z,{className:"size-4"})}),(0,l.jsxs)(I.Z,{children:[s.name,(0,l.jsx)(x.ZP,{level:"body-xs",children:s.place_formatted})]})]})})})};var H=t(57162),B=t(25854),U=t(84982);let W="_random_distance_",V=e=>{var s;let{onClick:t}=e,[r,a]=(0,n.useState)(Number(null!==(s=localStorage.getItem(W))&&void 0!==s?s:100)),[i,c]=(0,n.useState)(!1),o=(0,n.useCallback)(()=>c(e=>!e),[]),d=(0,n.useCallback)(()=>t(r),[r,t]),u=(0,n.useCallback)(()=>t(0),[t]),h=(0,n.useCallback)(e=>{var s;localStorage.setItem(W,e.target.value),a(Number(null!==(s=e.target.value)&&void 0!==s?s:100))},[]);return i?(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsx)(p.ZP,{startDecorator:"randomize by",endDecorator:"m",variant:"plain",value:r,onChange:h,className:"text-xs w-44 border-0 outline-none",size:"sm"}),(0,l.jsx)(H.Z,{className:"size-3 cursor-pointer",role:"button",onClick:d,title:"randomize ~".concat(r,"m")}),(0,l.jsx)(B.Z,{className:"size-3 cursor-pointer",role:"button",onClick:u,title:"reset randomness"}),(0,l.jsx)(U.Z,{className:"size-3 cursor-pointer",role:"button",onClick:o,title:"cancel"})]}):(0,l.jsx)("a",{className:"size-3 inline-block cursor-pointer",onClick:o,title:"randomize coords",children:(0,l.jsx)(H.Z,{})})},G=(0,v.default)(()=>Promise.resolve().then(t.bind(t,79627)).then(e=>e.MapViewer),{loadableGenerated:{webpack:()=>[79627]},ssr:!1}),J={lat:0,lng:0},Y=e=>{let{onPublish:s}=e,t=(0,a.useRouter)(),{api:r}=(0,c.Rv)(),{data:i,errors:d,setSelfieData:v,hasImages:b,markers:w}=(0,c.dV)(),[y,Z]=(0,n.useState)({lat:i.selfie.lat,lng:i.selfie.lng}),S=(null==b?void 0:b.me)?i.images.me.date:i.images.lc.date,k=e=>s=>v({[e]:s.target.value}),C=(0,n.useCallback)(function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:J,t={lat:s.lat||i.selfie.lat,lng:s.lng||i.selfie.lng};v({place:e,...t}),Z(e=>({c:e,...t}))},[i.selfie.lat,i.selfie.lng,v]),z=(0,n.useCallback)(e=>{let[s,t]=A(e,y.lat),l=y.lat+s,r=y.lng+t;v({...i.selfie,lat:l,lng:r})},[i.selfie,y.lat,y.lng,v]);return b?(0,l.jsxs)("form",{className:"flex flex-col space-y-10",onSubmit:e=>{e.preventDefault(),s()},children:[(0,l.jsxs)("div",{className:"flex flex-col space-y-10 lg:flex-row lg:space-x-10 lg:space-y-0 items-start",children:[(0,l.jsxs)("div",{className:"flex flex-col space-y-10 flex-1 w-full",children:[(0,l.jsxs)(m.Z,{error:!!d.title,children:[(0,l.jsxs)(f.Z,{sx:{display:"flex",justifyContent:"space-between",width:"100%"},children:[(0,l.jsx)("span",{children:"title"}),(0,l.jsx)(N,{})]}),(0,l.jsx)(p.ZP,{value:i.selfie.title,onChange:k("title")}),d.title&&(0,l.jsx)(j.Z,{children:d.title})]}),(0,l.jsxs)(m.Z,{error:!!d.subtitle,children:[(0,l.jsx)(f.Z,{children:"some words"}),(0,l.jsx)(p.ZP,{value:i.selfie.subtitle,onChange:k("subtitle")}),d.subtitle&&(0,l.jsx)(j.Z,{children:d.subtitle})]})]}),(0,l.jsxs)("div",{className:"flex flex-col space-y-10 flex-1 w-full",children:[(0,l.jsxs)(m.Z,{error:!!d.date,children:[(0,l.jsxs)(f.Z,{sx:{width:"100%",display:"flex",justifyContent:"space-between"},children:[(0,l.jsx)("span",{children:"date"}),(0,l.jsxs)("span",{className:"fric space-x-4 subtle-hover",children:[!!S&&(0,l.jsx)("a",{role:"button",className:"cursor-pointer hover:underline",onClick:()=>{let e=1970===new Date(S).getFullYear()?1e3:1,s=new Date(Number(S)*e).toISOString().split("T")[0];console.log("Using picture's date: ",S,s),v({date:s})},children:"from picture"}),(0,l.jsx)("a",{role:"button",className:"cursor-pointer hover:underline",onClick:()=>v({date:new Date().toISOString().split("T")[0]}),children:"today"})]})]}),(0,l.jsx)(p.ZP,{value:i.selfie.date,onChange:k("date"),type:"date",sx:{textAlign:"left"}}),d.date&&(0,l.jsx)(j.Z,{children:d.date})]}),(0,l.jsxs)(m.Z,{error:!!d.place,children:[(0,l.jsxs)(f.Z,{sx:{width:"100%"},children:["place",(0,l.jsx)("div",{className:"ml-auto text-xs flex gap-2 items-center",children:(0,l.jsx)("pre",{className:"subtle-hover",children:(0,o.r7)(i.selfie)})})]}),(0,l.jsx)(Q,{onUpdateCoords:C}),!!(i.selfie.lat||i.selfie.lng)&&(0,l.jsx)("div",{className:"ml-auto",children:(0,l.jsx)(V,{onClick:z})}),(null==d?void 0:d.place)&&(0,l.jsx)(j.Z,{children:d.place})]})]})]}),(0,l.jsx)(G,{className:"relative overflow-hidden h-[40rem] w-full",markers:w,style:"streets",changeStyleOnDragTo:"streets"}),(0,l.jsx)(T,{value:i.selfie.description,onChange:e=>v({description:e}),error:d.description}),(0,l.jsx)(g.Z,{startDecorator:(0,l.jsx)(u.Z,{className:"size-6"}),type:"submit",variant:"soft",children:"publish"}),(0,l.jsx)(g.Z,{startDecorator:(0,l.jsx)(h.Z,{className:"size-4"}),onClick:()=>{(0,o.G0)(r,{name:i.selfie.title,hash:i.selfie.hash},e=>t.push("/new"))},variant:"soft",color:"danger",size:"sm",children:"delete"})]}):(0,l.jsx)(x.ZP,{level:"h4",sx:{marginX:"auto",paddingY:10,color:"#ccc"},className:"text-inset-shadow",children:"Add images first"})};var X=t(26794);let q=e=>{let{className:s="",imageStyle:t={},onUploadStatusChange:r,src:a,type:d}=e,{api:u}=(0,c.Rv)(),{data:h,hash:x,setData:m,hasLocation:f}=(0,c.dV)(),[p,j]=(0,n.useState)(null),[v,A]=(0,n.useState)((0,o.ZE)()),[b,N]=(0,n.useState)(!1),y=(0,n.useMemo)(()=>p||(a?"https://travel-api.kupfer.es"+a+"?t=".concat(v):void 0),[p,a,v]),Z=(0,n.useCallback)(e=>{let s=e[0];if(!(null==s?void 0:s.type.startsWith("image/"))){i.toast.error("Invalid image type!");return}N(!0),E(s,e=>{j(e),r(!0);let t=new FormData;t.append("_file_",s),t.append("hash",x),t.append("type",d);let l=u({method:"POST",body:t,url:"/api/selfieupload",contentType:!1}).then(o.xO).then(e=>(j(null),A((0,o.ZE)()),e.gps&&!f?m(s=>({...s,images:{...s.images,[d]:e},selfie:z(s.selfie,e.gps)})):m(s=>({...s,images:{...s.images,[d]:e}})),e)).finally(()=>{r(!1),N(!1)});i.toast.promise(l,{success:e=>e.message,error:e=>e.message})})},[r,x,d,u,f,m]),k=()=>{let e=u({url:"/api/rotate-image",body:{hash:x,type:d}}).then(o.xO).then(e=>{A(+new Date)});i.toast.promise(e,{success:void 0,error:e=>String(e)})},D=e=>{m({...h,selfie:z(h.selfie,e,!0)})};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(C,{onFileAdded:Z,isUploading:b,className:w()("items-center flex justify-center aspect-[4/3]",s),children:y?(0,l.jsx)("div",{style:{backgroundImage:"url(".concat(y,")"),...t},"aria-description":"me"===d?"My image":"Landscape image"}):(0,l.jsxs)("div",{className:"text-inset-shadow text-lg",children:["Drop an image of ","me"===d?"yourself":"what you see"]})}),a&&(0,l.jsx)(S.ZP,{onClick:()=>k(),size:"sm",variant:"soft",color:"neutral",sx:{position:"absolute",right:10,bottom:10},title:"rotate clockwise",className:"group",children:(0,l.jsx)(H.Z,{className:"size-6 group-hover:animate-spin"})}),a&&h.images[d].gps&&(0,l.jsx)(X.bo,{title:(0,l.jsx)(l.Fragment,{children:"Set coordinates?"}),content:(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)("span",{children:"This will set your image coordinates for this selfie."}),(0,l.jsx)("kbd",{children:(0,o.r7)(h.images[d].gps)}),(0,l.jsx)("span",{children:"The name of the location will also be changed."})]}),primaryButton:e=>(0,l.jsx)(g.Z,{onClick:()=>{D(h.images[d].gps),e()},startDecorator:(0,l.jsx)(_.Z,{className:"size-4"}),children:"set coordinates"}),secondaryButton:e=>(0,l.jsx)(g.Z,{startDecorator:(0,l.jsx)(U.Z,{className:"size-5"}),onClick:e,color:"neutral",sx:{marginRight:"auto"},children:"cancel"}),children:e=>(0,l.jsx)(S.ZP,{onClick:()=>e(),size:"sm",variant:"soft",color:"neutral",title:"use the coordinates of this image",className:"group",sx:{position:"absolute",left:10,bottom:10},children:(0,l.jsx)(_.Z,{className:"size-6 group-hover:animate-bounce"})})})]})},K=()=>{let{data:e}=(0,c.dV)(),s=(e,s)=>{},t=s=>{var t,l;let r=null!==(l=null===(t=e.images[s].color)||void 0===t?void 0:t.color)&&void 0!==l?l:"";return e.images[s].img&&r?{boxShadow:e.images[s].img?(0,o.t6)(r):void 0,border:"10px solid rgb(".concat(r,")"),backgroundColor:"rgb(".concat(r,")"),width:"100%",aspectRatio:"4 / 3",backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"center"}:{}};return(0,l.jsxs)("div",{className:"grid grid-flow-col grid-rows-2 lg:grid-rows-1 lg:grid-flow-row lg:grid-cols-2 gap-10",children:[(0,l.jsx)("div",{className:"relative",children:(0,l.jsx)(q,{src:e.images.me.img,type:"me",onUploadStatusChange:e=>s("me",e),className:"relative",imageStyle:t("me")})}),(0,l.jsx)("div",{className:"relative",children:(0,l.jsx)(q,{src:e.images.lc.img,type:"lc",onUploadStatusChange:e=>s("lc",e),className:"relative",imageStyle:t("lc")})})]})};t(74590);var $=(0,t(58064).$)("06c3c0885ee10b0d6b95556dbef181c4f6360a14");let ee=()=>{let{api:e}=(0,c.Rv)(),{data:s}=(0,c.dV)(),t=(0,a.useRouter)(),u=(0,n.useRef)(),h=(0,n.useRef)(JSON.stringify(s.selfie));return(0,n.useEffect)(()=>{s.selfie.visible||JSON.stringify(s.selfie)===h.current||(clearTimeout(u.current),u.current=setTimeout(()=>{let t=e({url:"/api/selfie/save-changes",body:s.selfie}).then(o.xO);i.toast.promise(t,{success:()=>(h.current=JSON.stringify(s.selfie),"(saved in the background)"),error:e=>String(e)})},5e3));let t=u.current;return()=>clearTimeout(t)},[e,s.selfie]),(0,l.jsxs)("div",{className:"flex flex-col space-y-8 w-[95vw] sm:w-[90vw] mx-auto lg:w-[60vw]",children:[(0,l.jsx)(K,{}),(0,l.jsx)(Y,{onPublish:()=>{if(!d.iW.safeParse(s.selfie).success){i.toast.error("please correct the errors!");return}i.toast.promise($(s.selfie),{success:e=>(t.push(e.redirect),e.new&&setTimeout(()=>{new r.Z().addConfetti({confettiRadius:0})},3e3),e.message),error:e=>String(e)})}})]})}},41584:function(e,s,t){"use strict";t.r(s),t.d(s,{AlertDialogModal:function(){return u}});var l=t(57437),r=t(81710),a=t(28291),n=t(5920),i=t(18330),c=t(83283),o=t(63298),d=t(2265);let u=e=>{let{children:s,title:t,content:u,primaryButton:h,secondaryButton:x}=e,[m,f]=(0,d.useState)(!1);return(0,l.jsxs)(l.Fragment,{children:[s(()=>f(!0)),(0,l.jsx)(r.ZP,{open:m,onClose:()=>f(!1),children:(0,l.jsxs)(a.Z,{variant:"outlined",role:"alertdialog",children:[t&&(0,l.jsx)(n.Z,{children:t}),(0,l.jsx)(i.Z,{}),(0,l.jsx)(c.Z,{children:u}),(0,l.jsxs)(o.Z,{children:[h(()=>f(!1)),null==x?void 0:x(()=>f(!1))]})]})})]})}},67133:function(e,s,t){"use strict";t.r(s),t.d(s,{CopyPath:function(){return a}});var l=t(57437),r=t(98384);let a=e=>(0,l.jsx)(r.CopyToClipboard,{...e,copyValue:window.location.href,showNotification:"URL copied! Share it anywhere"})},98384:function(e,s,t){"use strict";t.r(s),t.d(s,{CopyToClipboard:function(){return c}});var l=t(57437),r=t(18624),a=t(32897),n=t(2265),i=t(42874);let c=e=>{var s,t;let{showNotification:c=null,withIcon:o=!0,...d}=e,[u,h]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{if(u){let e=(0,i.gw)(()=>h(!1),1e3);return()=>clearTimeout(e)}},[u]),(0,l.jsxs)("a",{href:"#",className:"flex items-center space-x-2 "+(null!==(s=d.className)&&void 0!==s?s:""),role:"button","aria-label":"copy to clipboard",style:{cursor:"pointer",textDecoration:"none"},onClick:e=>{e.preventDefault(),e.stopPropagation(),(0,i.vQ)(d.copyValue,()=>{var e;null===(e=d.onCopy)||void 0===e||e.call(d),h(!0)},c)},children:[o&&(u?(0,l.jsx)(r.Z,{className:"size-4 text-green-500"}):null!==(t=d.icon)&&void 0!==t?t:(0,l.jsx)(a.Z,{className:"size-4 hover:text-blue-500"})),d.text&&(0,l.jsx)("span",{children:d.text})]})}},84490:function(e,s,t){"use strict";t.r(s),t.d(s,{SystemModeColorCookie:function(){return i}});var l=t(57437),r=t(89752),a=t(44785),n=t(2265);let i=()=>{let{systemMode:e}=(0,r.tv)();return(0,n.useEffect)(()=>{a.Z.set("theme",null!=e?e:"system"),document.documentElement.className=null!=e?e:"_system_"},[e]),(0,l.jsx)(l.Fragment,{})}},77346:function(e,s,t){"use strict";t.r(s),t.d(s,{HistoryMap:function(){return j}});var l=t(57437),r=t(37585),a=t(53790),n=t(56800),i=t.n(n),c=t(57818),o=t(2265),d=t(32367),u=t(42874);let h=(e,s,t)=>{let l=[];for(let r=0,a=e.length;r<a;++r){let a=+new Date(e[r].selfie_date);a<=s[1]+d.Mb&&a>=s[0]-d.Mb&&l.push((0,u.Ww)(e[r],{url:t,lc:!1}))}return l},x=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],m=e=>e>=2&&e<=4?"Spring":e>=5&&e<=7?"Summer":e>=8&&e<=10?"Fall":"Winter",f=e=>{let s=new Date(e[0]),t=new Date(e[1]),l=s.getMonth(),r=s.getFullYear(),a=t.getMonth(),n=t.getFullYear(),i=(e[1]-e[0])/31536e6,c=[];if(i>=9)for(let e=r;e<=n;e+=2){let s=new Date(e,0,1);c.push({value:s.getTime(),label:String(e)})}else if(i>4)for(let e=r;e<=n;e++){let s=new Date(e,0,1);c.push({value:s.getTime(),label:String(e)})}else if(i>1.3)for(let e=r;e<=n;e++)for(let s=0;s<4;s++){let t=3*s;if(e===r&&t<l)continue;if(e===n&&t>a)break;let i=new Date(e,t,1);c.push({value:i.getTime(),label:"".concat(m(t)," ").concat(e)})}else for(let e=r;e<=n;e++){let s=e===r?l:0,t=e===n?a:11;for(let l=s;l<=t;l++){let s=new Date(e,l,1);c.push({value:s.getTime(),label:"".concat(x[l]," ").concat(e)})}}return c},p=(0,c.default)(()=>Promise.resolve().then(t.bind(t,79627)).then(e=>e.MapViewer),{loadableGenerated:{webpack:()=>[79627]},ssr:!1}),j=e=>{let{className:s="",range:t,selfies:n,pinUrl:c}=e,[x,m]=(0,o.useState)([Math.max(t[0],t[1]-d._4),t[1]]),[j,g]=(0,o.useState)(x),[v,A]=(0,o.useState)(!1),b=(0,o.useMemo)(()=>h(n,x,c),[x,c,n]),w=(0,o.useMemo)(()=>f(t),[t]);return(0,l.jsxs)("div",{className:"w-full",children:[(0,l.jsx)(r.Z,{sx:{height:100,width:"100%"},children:(0,l.jsx)(a.Z,{min:t[0],max:t[1],step:d.xj,value:j,onChange:(e,s)=>{A(!0),g(s)},onChangeCommitted:(e,s)=>{m(s),A(!1)},valueLabelDisplay:"auto",valueLabelFormat:e=>new Date(e).toDateString(),marks:w,sx:{width:"90%",marginX:"auto","--Slider-thumbSize":"24px",".MuiSlider-track":{background:"linear-gradient(to right, ".concat(d.ZG,", ").concat(d.TW,") !important")},".MuiSlider-thumb":{"&::before":{borderColor:d.ZG+" !important",background:d.ZG},"&:last-of-type::before":{borderColor:d.TW+" !important",background:d.TW}}}})}),(0,l.jsx)(p,{className:i()("relative overflow-hidden",s,(0,u.Ij)({loading:v,spinner:!0})),markers:b,style:"satellite",changeStyleOnDragTo:"satellite",connected:!0,lineColors:[d.ZG,d.TW],zoom:2})]})}},26794:function(e,s,t){"use strict";t.d(s,{bo:function(){return l.AlertDialogModal},mu:function(){return o.CopyPath},J7:function(){return d.HistoryMap},M5:function(){return u.SearchEverywhere},uN:function(){return c}});var l=t(41584),r=t(57437),a=t(68834),n=t(56800),i=t.n(n);let c=e=>{let{className:s="",onClick:t,children:l,selected:n}=e;return(0,r.jsx)(a.Z,{onClick:t,className:i()("cursor-pointer hover:drop-shadow opacity-60 border-transparent",{"!border-gray-500 !opacity-100":n},s),children:l})};t(98384);var o=t(67133);t(66648),t(3258),t(30105),t(14084),t(84490);var d=t(77346);t(79627);var u=t(55050)},79627:function(e,s,t){"use strict";t.r(s),t.d(s,{MapViewer:function(){return x}});var l=t(57437);t(89360),t(33222);var r=t(56800),a=t.n(r),n=t(77719),i=t.n(n),c=t(2265),o=t(32367),d=t(42874);let u=(e,s)=>({id:(0,d.kb)(),type:"line",source:{type:"geojson",data:{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:e}},lineMetrics:!0},layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#ccc","line-width":2,"line-gradient":["interpolate",["linear"],["line-progress"],0,s[0],1,s[1]]}}),h=e=>"satellite"===e?"mapbox://styles/mapbox/satellite-v9":"mapbox://styles/mapbox/streets-v12",x=e=>{let{connected:s=!1,changeStyleOnDragTo:t="streets",className:r="",markers:n,style:d,lineColors:x=["#ccc","#ccc"],extraConfig:m,onExtraConfigLoaded:f,zoom:p=o.o0}=e,j=(0,c.useRef)(),g=(0,c.useRef)(null),v=(0,c.useRef)([]),A=(0,c.useRef)(null),b=(0,c.useRef)(!1),w=(0,c.useRef)(!0),N=(0,c.useRef)(),y=(0,c.useCallback)(()=>{if(!b.current||!g.current){console.info("`handleSetMarkers` called before map was initialized");return}for(let e=0,s=v.current.length;e<s;++e)v.current[e].remove();A.current&&g.current.getLayer(A.current.id)&&g.current.removeLayer(A.current.id);let e=[];for(let s=0,t=n.length;s<t;++s){let t={lat:n[s].lat,lng:n[s].lng},l=document.createElement("div");l.innerHTML=n[s].icon;let r=new(i()).Marker(l).setLngLat(t).addTo(g.current);v.current.push(r),e.push([t.lng,t.lat])}n.length>1&&s&&(A.current=u(e,x),g.current.addLayer(A.current)),w.current&&(null==m||m(g.current,v.current,A.current)),setTimeout(()=>{if(!g.current)throw Error("Map seems to not have been loaded!");let s=e.reduce(function(e,s){return e.extend(s)},new(i()).LngLatBounds(e[0],e[0]));g.current.fitBounds(s,{padding:20}),w.current&&(g.current.resize(),g.current.triggerRepaint())},500)},[s,m,x,n]);return(0,c.useEffect)(()=>{if(!w.current){var e;null===(e=g.current)||void 0===e||e.zoomTo(p)}},[p]),(0,c.useEffect)(()=>{w.current||y()},[y,n]),(0,c.useLayoutEffect)(()=>{var e;if(g.current)return;let s=null!==(e=n[0])&&void 0!==e?e:o.Tm;g.current=new(i()).Map({container:j.current,style:h(d),center:s,zoom:p,maxZoom:o.o_,accessToken:"pk.eyJ1Ijoibmljb2pvbmVzIiwiYSI6ImNqYjhvejQxNjA1eXkzMm9mcTljanBubGcifQ.WM7Ry1e1-1liibdD7PSNsA",boxZoom:!0,projection:{name:"globe",center:[s.lng,s.lat]},cooperativeGestures:!0,doubleClickZoom:!0,attributionControl:!1,renderWorldCopies:!1});let l=g.current;g.current.on("load",e=>{b.current=!0;let s=new(i()).NavigationControl({showCompass:!1});l.addControl(s,"top-left"),y(),w.current&&(null==f||f(g.current,v.current,A.current)),w.current=!1}),t!==d&&(g.current.on("drag",e=>{var s;null===(s=g.current)||void 0===s||s.setStyle(h(t))}),g.current.on("dragend",e=>{clearTimeout(N.current),N.current=setTimeout(()=>{var e,t;null===(e=g.current)||void 0===e||e.setStyle(h(d)),null===(t=g.current)||void 0===t||t.panTo(s)},5e3)}))},[]),(0,l.jsx)("div",{className:a()("flex items-center justify-center relative w-full",r),"data-loading":"Refreshing...",children:(0,l.jsx)("div",{ref:j,className:r})})}},55050:function(e,s,t){"use strict";t.r(s),t.d(s,{SearchEverywhere:function(){return o}});var l=t(57437),r=t(98920),a=t(16463),n=t(2265),i=t(27776),c=t(92064);let o=()=>{let[e,s]=(0,n.useState)(""),t=(0,a.useRouter)();return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("form",{onSubmit:s=>{s.preventDefault(),s.stopPropagation(),(0,c.B)("all",e,!0).then(s=>{if("redirect"in s){let e=s.searchType&&"selfie"!==s.searchType?"?type=".concat(s.searchType):"";t.push(s.redirect+e)}else i.toast.error((0,l.jsxs)(l.Fragment,{children:["No results for ",(0,l.jsx)("kbd",{children:e})]}))})},children:(0,l.jsx)(r.ZP,{placeholder:"search everywhere",value:e,onChange:e=>{s(e.target.value)},type:"text",sx:{width:"100%"}})})})}},52520:function(e,s,t){"use strict";t.d(s,{U:function(){return n}});var l=t(57437);t(16628);var r=t(56800),a=t.n(r);let n=e=>{let{open:s,onClick:t}=e;return(0,l.jsxs)("a",{role:"button",id:"main-menu-button",className:a()("menu-button menu-button-lines",{open:s}),onClick:()=>t(),children:[(0,l.jsx)("hr",{}),(0,l.jsx)("hr",{}),(0,l.jsx)("hr",{})]})}},95401:function(e,s,t){"use strict";t.r(s),t.d(s,{HeaderAndDrawer:function(){return J}});var l=t(57437),r=t(69568),a=t(47339),n=t(65489),i=t(30727),c=t(24192),o=t(1714),d=t(5920),u=t(79951),h=t(83283),x=t(30355),m=t(15780),f=t(50799),p=t(23512),j=t(66648),g=t(87138),v=t(16463),A=t(2265),b=t(3258),w=t(26794),N=t(32367),y=t(70191),Z=t(55663),S=t(63568),k=t(930),C=t(36831),z=t(90779),E=t(202),D=t(3795),P=t(96442),T=t(18330),M=t(90597),_=t(88410),R=t(48261),F=t(89649),L=t(56800),I=t.n(L),O=t(42874);let Q=e=>{let{notification:s}=e;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("span",{className:"text-secondary",children:[(0,l.jsx)(g.default,{href:"/u/".concat(s.username),className:"font-bold cursor-pointer hover:underline",onClick:e=>e.stopPropagation(),children:s.name}),"\xa0 commented on your post \xa0",(0,l.jsx)(g.default,{href:"/s/".concat(s.active_hash),className:"font-bold cursor-pointer hover:underline",children:s.title})]}),(0,l.jsx)("p",{children:s.comment})]})},H=e=>{let{notification:s}=e;return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("span",{className:"text-sm",children:[(0,l.jsx)(g.default,{href:"/u/".concat(s.username),className:"font-bold cursor-pointer hover:underline",onClick:e=>e.stopPropagation(),children:s.name}),"\xa0 liked your post \xa0",(0,l.jsx)(g.default,{href:"/s/".concat(s.active_hash),className:"font-bold cursor-pointer hover:underline",children:s.title})]})})},B=e=>{let{notification:s}=e;return(0,l.jsxs)("div",{className:"fric space-x-2",children:[(0,l.jsx)(j.default,{width:100,height:150,src:(0,O.Jm)({hash:s.hash}),alt:s.title}),(0,l.jsxs)("div",{className:"flex flex-col justify-around",children:[(0,l.jsxs)("span",{className:"text-sm",children:[(0,l.jsx)(g.default,{href:"/u/".concat(s.username),className:"font-bold cursor-pointer hover:underline",onClick:e=>e.stopPropagation(),children:s.name}),"\xa0 has uploaded a new post"]}),(0,l.jsx)(g.default,{href:"/s/".concat(s.active_hash),className:"font-bold cursor-pointer hover:underline",children:s.title})]})]})},U=e=>{let{notification:s}=e,{markAsRead:t,markAsUnead:r}=(0,y.lR)(),[a,n]=(0,A.useState)(!!s.seen);return(0,l.jsxs)("div",{className:I()("grid grid-cols-12 cursor-pointer hover:bg-slate-200 w-full py-1 relative",{"opacity-50 hover:opacity-100 transition-opacity":a}),role:"button",onClick:()=>{a?r(s.id):t(s.id),n(e=>!e)},children:[(0,l.jsxs)("div",{className:"fric col-span-2",children:[(0,l.jsxs)("div",{className:"h-full w-8 grid place-items-center",children:[(0,l.jsx)("span",{title:s.added_on,className:"absolute top-1 right-1 cursor-help text-xs",children:(0,O.Sy)(s.added_on)}),(0,l.jsx)("div",{className:I()("rounded-full w-3 aspect-square border border-blue-600",{"bg-blue-600":!a})})]}),(0,l.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,l.jsx)(D.Z,{src:"https://travel-api.kupfer.es"+s.avatar}),(0,l.jsxs)(g.default,{href:"/u/".concat(s.username),target:"_blank",rel:"noreferrer",className:"text-secondary font-bold",onClick:e=>e.stopPropagation(),children:["@",s.username]})]})]}),(0,l.jsxs)("div",{className:"flex flex-col space-y-2 pl-6 col-span-10 justify-center",children:["comment"===s.notif_type&&(0,l.jsx)(Q,{notification:s}),"like"===s.notif_type&&(0,l.jsx)(H,{notification:s}),"post"===s.notif_type&&(0,l.jsx)(B,{notification:s})]})]})},W=e=>{let{children:s}=e,{notifications:t,loadMore:r}=(0,y.lR)(),a=(0,v.usePathname)(),[n,i]=(0,A.useState)(!1);return(0,A.useEffect)(()=>{i(!1)},[a]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(o.Z,{anchor:"right",size:"lg",open:n,onClose:()=>i(!1),slotProps:{content:{}},children:(0,l.jsxs)(R.Z,{sx:{borderRadius:"md",p:2,display:"flex",flexDirection:"column",gap:2,height:"100%",overflow:"auto"},children:[(0,l.jsx)(d.Z,{level:"h2",children:"Notifications"}),(0,l.jsx)(u.Z,{size:"lg",sx:{marginRight:"auto"}}),(0,l.jsxs)(h.Z,{children:[(0,l.jsx)("div",{className:"flex flex-col space-y-4",children:t.map(e=>(0,l.jsx)(U,{notification:e},e.id))}),t.length>0&&(0,l.jsx)(F.Z,{variant:"plain",size:"sm",color:"neutral",onClick:r,className:"mt-4",children:"load older notifications"})]})]})}),s(()=>{i(e=>!e)})]})},V=()=>{let e=(0,v.usePathname)(),{isAuthed:s,user:t}=(0,y.Rv)(),{unread:r}=(0,y.lR)(),[a,n]=(0,A.useState)(!1),i=()=>{n(e=>!e)};(0,A.useEffect)(()=>{n(!1)},[e]);let c=(0,A.useMemo)(()=>t?(0,l.jsx)(D.Z,{size:"lg",src:"https://travel-api.kupfer.es"+t.avatar,onClick:i,className:"ml-auto cursor-pointer"}):null,[t]);return s?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(o.Z,{anchor:"right",open:a,onClose:i,size:"sm",slotProps:{content:{sx:{minWidth:"max-content"}}},children:[(0,l.jsxs)(d.Z,{className:"fric justify-between",sx:{paddingLeft:2},children:[(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)(P.ZP,{level:"h3",children:t.name}),(0,l.jsxs)(g.default,{href:"/u/".concat(t.username),children:["@",t.username]})]}),c]}),(0,l.jsxs)(h.Z,{sx:{paddingLeft:2},children:[(0,l.jsx)(T.Z,{}),(0,l.jsxs)(x.Z,{children:["menu"===t.bell_position&&(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(W,{children:e=>(0,l.jsx)(m.Z,{children:(0,l.jsxs)(p.Z,{className:"fric",onClick:e,children:[(0,l.jsx)(f.Z,{children:(0,l.jsx)(M.Z,{badgeContent:r,children:(0,l.jsx)(Z.Z,{className:"size-5"})})}),(0,l.jsx)("span",{children:"notifications"})]})})})}),(0,l.jsx)(g.default,{href:"/dashboard",children:(0,l.jsx)(m.Z,{children:(0,l.jsxs)(p.Z,{className:"fric",children:[(0,l.jsx)(f.Z,{children:(0,l.jsx)(S.Z,{className:"size-5"})}),(0,l.jsx)("span",{children:"dashboard"})]})})}),(0,l.jsx)(g.default,{href:"/new",children:(0,l.jsx)(m.Z,{children:(0,l.jsxs)(p.Z,{className:"fric",children:[(0,l.jsx)(f.Z,{children:(0,l.jsx)(k.Z,{className:"size-5"})}),(0,l.jsx)("span",{children:"upload"})]})})}),(0,l.jsx)(g.default,{href:"/dashboard/settings",children:(0,l.jsx)(m.Z,{children:(0,l.jsxs)(p.Z,{className:"fric",children:[(0,l.jsx)(f.Z,{children:(0,l.jsx)(C.Z,{className:"size-5"})}),(0,l.jsx)("span",{children:"settings"})]})})}),(0,l.jsx)(g.default,{href:"/auth/logout",className:"mt-auto",children:(0,l.jsx)(m.Z,{children:(0,l.jsxs)(p.Z,{className:"fric",children:[(0,l.jsx)(f.Z,{children:(0,l.jsx)(z.Z,{className:"size-5"})}),(0,l.jsx)("span",{children:"log out"})]})})})]})]})]}),(0,l.jsxs)("div",{className:"mt-2 mr-1 fric space-x-4",children:["top"===t.bell_position&&(0,l.jsx)(W,{children:e=>(0,l.jsx)(M.Z,{badgeContent:r,children:(0,l.jsx)(_.ZP,{variant:"plain",onClick:e,className:"text-black dark:text-white rounded-full hover:rounded-full",size:"lg",children:(0,l.jsx)(Z.Z,{className:"size-6"})})})}),c]})]}):(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(g.default,{href:"/auth/sign-in",className:"p-4 group",children:(0,l.jsx)(E.Z,{className:"size-14 opacity-20 group-hover:opacity-60 transition-opacity"})})})};var G=t(52520);let J=()=>{let e=(0,v.usePathname)(),{isAuthed:s}=(0,y.Rv)(),[t,Z]=(0,A.useState)(!1),S=()=>{Z(e=>!e)};return(0,A.useEffect)(()=>{Z(!1)},[e]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(o.Z,{size:"sm",anchor:"left",open:t,onClose:S,slotProps:{content:{sx:{minWidth:"max-content"}}},children:[(0,l.jsx)(d.Z,{level:"h2",sx:{paddingX:2},children:"Menu"}),(0,l.jsx)(u.Z,{size:"lg"}),(0,l.jsx)(h.Z,{children:(0,l.jsxs)(x.Z,{sx:{paddingX:2,minWidth:"max-content"},children:[(0,l.jsx)(m.Z,{children:(0,l.jsxs)("div",{className:"fric space-x-4",children:[(0,l.jsx)(f.Z,{children:(0,l.jsx)(r.Z,{className:"size-6"})}),(0,l.jsx)(w.M5,{})]})}),(0,l.jsx)(m.Z,{children:(0,l.jsx)(g.default,{href:"/",className:"w-full",children:(0,l.jsxs)(p.Z,{className:"fric space-x-2",children:[(0,l.jsx)(f.Z,{children:(0,l.jsx)(a.Z,{className:"size-6"})}),(0,l.jsx)("span",{children:"All selfies"})]})})}),s&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(m.Z,{children:(0,l.jsx)(g.default,{href:"/discover",className:"w-full",children:(0,l.jsxs)(p.Z,{className:"fric space-x-2",children:[(0,l.jsx)(f.Z,{children:(0,l.jsx)(n.Z,{className:"size-6"})}),(0,l.jsx)("span",{children:"Discover"})]})})}),(0,l.jsx)(m.Z,{children:(0,l.jsx)(g.default,{href:"/loves",className:"w-full",children:(0,l.jsxs)(p.Z,{className:"fric space-x-2",children:[(0,l.jsx)(f.Z,{children:(0,l.jsx)(i.Z,{className:"size-6"})}),(0,l.jsx)("span",{children:"Loved by you"})]})})})]}),(0,l.jsx)(m.Z,{children:(0,l.jsx)(g.default,{href:"/users",className:"w-full",children:(0,l.jsxs)(p.Z,{className:"fric space-x-2",children:[(0,l.jsx)(f.Z,{children:(0,l.jsx)(c.Z,{className:"size-6"})}),(0,l.jsx)("span",{children:"Users"})]})})})]})})]}),(0,l.jsxs)("nav",{className:"fric justify-between pl-3 lg:pl-12 pr-2 py-2 fixed top-0 left-0 w-screen h-[var(--header-height)] z-[1]",children:[(0,l.jsxs)("div",{className:"fric space-x-3 lg:space-x-8",children:[(0,l.jsx)(G.U,{open:t,onClick:S}),(0,l.jsx)(g.default,{href:s?N.Mg:N.P9,children:(0,l.jsx)(j.default,{src:b.s,width:50,height:50,alt:"Logo",priority:!0})})]}),(0,l.jsx)("div",{className:"fric space-x-4 -z-[1]",children:(0,l.jsx)(y.qF,{children:(0,l.jsx)(V,{})})})]})]})}},30105:function(e,s,t){"use strict";t(95401),t(52520),t(57437),t(56800)},80311:function(e,s,t){"use strict";t.d(s,{$O:function(){return l.$O},He:function(){return l.He},n4:function(){return l.n4},F0:function(){return l.F0},Lh:function(){return l.Lh},WV:function(){return l.WV},Y2:function(){return l.Y2},Dj:function(){return l.Dj}});var l=t(14084);t(30105),t(96905),t(57437),t(87138),t(4171)},67431:function(e,s,t){"use strict";t.r(s),t.d(s,{SelfiesAsyncLoader:function(){return o}});var l=t(57437),r=t(2265),a=t(27776),n=t(32367),i=t(46171),c=t(44692);let o=e=>{let{children:s,skip:t,fetcher:o}=e,[d,u]=(0,r.useState)({selfies:[],skip:t,loading:!1,more:!!o}),h=(0,r.useCallback)(()=>{if(d.loading||!d.more||!o)return;let e=window.document.documentElement,s=e.scrollHeight-e.clientHeight-n._r;window.scrollY>s&&(console.log("GETTING MORE ELEMENTS",d.skip),u(e=>({...e,loading:!0})),o(d.skip).then(e=>u(s=>({...s,more:!!e.more,skip:d.skip+e.selfies.length,selfies:[...s.selfies,...e.selfies],loading:!1}))).catch(e=>{u(e=>({...e,loading:!1})),a.toast.error(String(e))}))},[d.loading,d.skip,d.more,o]);return(0,r.useEffect)(()=>{let e;let s=()=>{clearTimeout(e),e=setTimeout(h,300)};return window.addEventListener("scroll",s),()=>{window.removeEventListener("scroll",s),clearTimeout(e)}},[h]),(0,l.jsxs)("main",{className:"flex flex-col space-y-48",onScroll:h,children:[s,d.selfies.map(e=>(0,l.jsx)(i.F,{selfie:e},e.id)),(0,l.jsx)(c.ThatsAllFolks,{hidden:d.more})]})}},46171:function(e,s,t){"use strict";t.d(s,{F:function(){return h}});var l=t(57437),r=t(56800),a=t.n(r),n=t(66648),i=t(32367),c=t(42874),o=t(80939),d=t(302),u=t(67358);let h=e=>{let{className:s="",disabled:t=!1,priority:r=!1,selfie:h}=e;return(0,l.jsxs)("div",{className:a()("flex flex-col max-w-full",s,{"pointer-events-none select-none":t}),style:{background:(0,c.OH)(h.me_color,h.lc_color),boxShadow:(0,c.t6)(h.me_color)},children:[(0,l.jsx)(u.SelfieHeader,{selfie:h}),(0,l.jsxs)("div",{role:"content",className:"flex flex-col md:flex-row relative",children:[!t&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(d.LoveSelfie,{selfie:h}),(0,l.jsx)(o.H,{selfie:h})]}),(0,l.jsx)(n.default,{src:t?i.Ty:(0,c.iQ)(h),alt:"My image",className:"w-full md:w-1/2",width:1e3,height:750,priority:r}),(0,l.jsx)(n.default,{src:t?i.Ty:(0,c.Jj)(h),alt:"Landscape image",className:"w-full md:w-1/2",width:1e3,height:750,priority:r})]})]})}},62466:function(e,s,t){"use strict";t.r(s),t.d(s,{SelfieCardLoader:function(){return c}});var l=t(57437),r=t(2265),a=t(70191),n=t(46171),i=t(96433);let c=e=>{let{hash:s}=e,{api:t}=(0,a.Rv)(),[c,o]=(0,r.useState)(null);return(0,r.useEffect)(()=>{t({body:{s:"one",hash:s}}).then(e=>{o(e.responseData.selfie)})},[t,s]),c?(0,l.jsx)(n.F,{selfie:c,priority:!1,className:"!max-w-[1000px] w-full my-24 mx-auto"}):(0,l.jsx)(i.W,{className:"!max-w-[1000px] w-full my-24 mx-auto"})}},96433:function(e,s,t){"use strict";t.d(s,{W:function(){return c}});var l=t(57437),r=t(47279),a=t(72272),n=t(56800),i=t.n(n);let c=e=>{let{className:s=""}=e;return(0,l.jsxs)("div",{className:i()("flex flex-col max-w-full border border-solid",s),children:[(0,l.jsxs)("div",{role:"header",className:"flex z-0 flex-col md:flex-row md:space-y-0 sm:space-x-0 md:space-x-4 md:fric space-y-2 justify-between p-4",children:[(0,l.jsxs)("div",{className:"flex flex-col md:grow",children:[(0,l.jsx)(r.Z,{animation:"wave",variant:"text",level:"h1",sx:{width:"100%"}}),(0,l.jsx)(r.Z,{animation:"wave",variant:"text",level:"h2",sx:{width:"100%"}})]}),(0,l.jsxs)("div",{className:"flex flex-col w-72",children:[(0,l.jsx)(r.Z,{animation:"wave",variant:"text",sx:{width:"100%"}}),(0,l.jsx)(r.Z,{animation:"wave",variant:"text",sx:{width:"100%"}}),(0,l.jsx)(r.Z,{animation:"wave",variant:"text",sx:{width:"100%"}})]})]}),(0,l.jsxs)("div",{role:"content",className:"flex flex-col md:flex-row relative md:justify-between z-0",children:[(0,l.jsx)(a.Z,{ratio:"4/3",sx:{width:"49%"},children:(0,l.jsx)(r.Z,{animation:"wave",sx:{width:"100%"}})}),(0,l.jsx)(a.Z,{ratio:"4/3",sx:{width:"49%"},children:(0,l.jsx)(r.Z,{animation:"wave",sx:{width:"100%"}})})]})]})}},32355:function(e,s,t){"use strict";t.r(s),t.d(s,{SelfieDate:function(){return n}});var l=t(57437),r=t(2265),a=t(42874);let n=e=>{let{date:s,icon:t,isDate:n=!1,label:i}=e,[c,o]=(0,r.useState)(!1),d=(0,r.useMemo)(()=>(0,a.p6)((0,a.ZP)(s),n),[s,n]);return(0,l.jsxs)("span",{className:"fric space-x-3 cursor-pointer",role:"button",onClick:()=>o(e=>!e),children:[t,c?(0,l.jsx)("span",{title:(i?i+" ":"")+(0,a.Sy)(s,n),children:d}):(0,l.jsx)("span",{title:(i?i+" ":"")+d,children:(0,a.Sy)(s,n)})]})}},67358:function(e,s,t){"use strict";t.r(s),t.d(s,{SelfieHeader:function(){return u}});var l=t(57437),r=t(930),a=t(90372),n=t(96442),i=t(87138),c=t(42874),o=t(32355),d=t(81138);let u=e=>{let{selfie:s}=e,t=(0,c.SH)(s),u=(0,c.SH)(s,"lc");return(0,l.jsx)(d.SelfieMap,{selfie:s,children:(e,c)=>(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{role:"header",className:"flex flex-col md:flex-row md:space-y-0 sm:space-x-0 md:space-x-4 space-y-2 justify-between p-4",children:[(0,l.jsxs)(i.default,{href:"/s/".concat(s.hash),className:"flex flex-col as-link",style:{color:t},children:[(0,l.jsx)(n.ZP,{level:"h1",sx:{color:t},children:s.title}),(0,l.jsx)(n.ZP,{level:"h3",sx:{color:t},children:s.short_desc})]}),(0,l.jsxs)("div",{className:"flex flex-col text-base text-[".concat(u,"] shrink-0"),children:[(0,l.jsx)(o.SelfieDate,{icon:(0,l.jsx)(r.Z,{className:"size-4"}),label:"taken",date:s.selfie_date,isDate:!0}),e,(0,l.jsxs)(i.default,{href:"/u/".concat(s.username),className:"fric space-x-3 as-link",children:[(0,l.jsx)(a.Z,{className:"size-4"}),(0,l.jsxs)("span",{children:["@",s.username]})]})]})]}),c]})})}},81138:function(e,s,t){"use strict";t.r(s),t.d(s,{SelfieMap:function(){return o}});var l=t(57437),r=t(76192),a=t(57818),n=t(2265),i=t(42874);let c=(0,a.default)(()=>Promise.resolve().then(t.bind(t,79627)).then(e=>e.MapViewer),{loadableGenerated:{webpack:()=>[79627]},ssr:!1}),o=e=>{let{children:s,selfie:t}=e,[a,o]=(0,n.useState)(!1),d=(0,n.useMemo)(()=>(0,i.Ww)(t),[t]);return s((0,l.jsxs)("span",{className:"fric space-x-3 cursor-pointer",onClick:()=>{o(e=>!e)},title:a?"close map":"open map",children:[(0,l.jsx)(r.Z,{className:"size-4"}),(0,l.jsx)("span",{children:a?"(".concat(t.lat.toFixed(2),", ").concat(t.lng.toFixed(2),")"):t.selfie_place})]}),a&&(0,l.jsx)(c,{markers:[d],style:"satellite",className:"w-full h-96"}))}},44692:function(e,s,t){"use strict";t.r(s),t.d(s,{ThatsAllFolks:function(){return i}});var l=t(57437),r=t(66648),a=t(2265),n=t(3258);let i=e=>{let{hidden:s}=e,[t,i]=(0,a.useState)(!1);return s?(0,l.jsx)(r.default,{src:n.w,className:"w-7/12 inline-block invisible size-0",alt:"No more selfies to show"}):(0,l.jsx)("div",{role:"button",onClick:()=>{i(!0)},style:{backgroundImage:"url(".concat(n.w.default.src,")")},className:"bg-center bg-cover inline-block h-96 opacity-30",children:t&&(0,l.jsx)("iframe",{src:"https://www.youtube.com/embed/Q3bbsDJWlXQ?autoplay=1&controls=0&rel=0&modestbranding=1&autohide=1&mute=1",className:"w-full h-full"})})}},99525:function(e,s,t){"use strict";t.r(s),t.d(s,{AddComment:function(){return f}});var l=t(57437),r=t(37585),a=t(98920),n=t(89649),i=t(87138),c=t(2265),o=t(27776),d=t(70191),u=t(42874),h=t(94404),x=t(81121);let m=(e,s,t)=>({comment:s,name:t.name,username:t.username,id:e,added_on:new Date().toISOString(),avatar:t.avatar}),f=e=>{let{selfie:s}=e,{api:t,isAuthed:f,user:p}=(0,d.Rv)(),[j,g]=(0,c.useState)(""),[v,A]=(0,c.useState)([]),b=(0,u.SH)(s),w=(0,c.useCallback)(e=>{if(e.preventDefault(),!j.length){(0,o.toast)("Please enter a longer comment");return}let l=Math.random();A(e=>[m(l,j,p),...e]),t({url:"/api/comments/post",body:{comment:j,selfie:s.hash}}).then(u.xO).then(e=>e.comment).then(e=>{A(s=>[...s.map(s=>s.id===l?e:s)]),g("")}).catch(()=>{A(e=>[...e.filter(e=>e.id!==l)])})},[t,j,s.hash,p]);return(0,l.jsxs)(l.Fragment,{children:[f?(0,l.jsxs)("form",{onSubmit:w,className:"flex flex-row justify-between comment-styles",children:[(0,l.jsx)(r.Z,{className:"grow",children:(0,l.jsx)(a.ZP,{placeholder:"Enter a comment...",value:j,onChange:e=>g(e.target.value),type:"text",sx:{backgroundColor:"transparent",borderColor:"transparent",boxShadow:"none",color:b,flexGrow:1,":focus":{outline:"none"},":focus-visible":{outline:"none"}},autoComplete:"off"})}),(0,l.jsx)(n.Z,{type:"submit",sx:{borderRadius:0,margin:"-.5rem",backgroundColor:"white",":hover":{backgroundColor:"white"}},children:(0,l.jsx)("span",{className:"text-gray-800",children:"add comment"})})]}):(0,l.jsx)(x.X,{color:b,children:(0,l.jsx)(i.default,{href:"/auth/sign-in",className:"underline hover:no-underline",children:"sign in to add a comment"})}),v.map(e=>(0,l.jsx)(h.H,{comment:e,selfie:s},e.id))]})}},94404:function(e,s,t){"use strict";t.d(s,{H:function(){return i}});var l=t(57437),r=t(3795),a=t(87138),n=t(42874);let i=e=>{let{comment:s,selfie:t}=e,i=(0,n.SH)(t);return(0,l.jsxs)("div",{className:"bg-transparent text-[".concat(i,"] fric space-x-2 comment-styles"),children:[(0,l.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,l.jsx)(r.Z,{src:"".concat("https://travel-api.kupfer.es").concat(s.avatar),alt:"Avatar of ".concat(s.name),className:"size-10"}),(0,l.jsxs)(a.default,{href:"/u/".concat(s.username),className:"flex flex-col",children:[(0,l.jsx)("span",{children:s.name}),(0,l.jsxs)("small",{children:["@",s.username]})]})]}),(0,l.jsxs)("p",{className:"p-3 relative fric grow h-full",children:[s.comment,(0,l.jsxs)("small",{className:"absolute -bottom-1 -right-1",children:["on ",s.added_on]})]})]})}},11683:function(e,s,t){"use strict";t.r(s),t.d(s,{CommentList:function(){return d}});var l=t(57437),r=t(2265),a=t(42874),n=t(99525),i=t(94404),c=t(81121);t(74590);var o=(0,t(58064).$)("b1a41dc2655d851f110a3d69243a3ac2141b1080");let d=e=>{let{selfie:s}=e,[t,d]=(0,r.useState)(null);return(0,r.useEffect)(()=>{o(s.hash).then(e=>d(e))},[s.hash]),(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)(n.AddComment,{selfie:s}),t?t.length?t.map(e=>(0,l.jsx)(i.H,{comment:e,selfie:s},e.id)):(0,l.jsx)(c.X,{color:(0,a.SH)(s),hoverEffect:!1,children:"No comments yet. Be the first"}):"Loading..."]})}},81121:function(e,s,t){"use strict";t.d(s,{X:function(){return n}});var l=t(57437),r=t(56800),a=t.n(r);let n=e=>{let{children:s,color:t,hoverEffect:r=!1}=e;return(0,l.jsx)("div",{className:"comment-styles fric justify-center grow",style:{color:t},children:(0,l.jsx)("label",{className:a()("opacity-25 p-10",{"hover:opacity-100":r}),children:s})})}},90173:function(e,s,t){"use strict";t.r(s),t.d(s,{EditSelfieButton:function(){return f}});var l=t(57437),r=t(52225),a=t(77699),n=t(56800),i=t.n(n),c=t(87138),o=t(16463),d=t(2265),u=t(70191),h=t(42874);let x="cursor-pointer hover:drop-shadow-sm transition-all relative select-none",m="size-7 bg-white rounded-full z-10 p-1",f=e=>{let{allowDelete:s,selfie:t}=e,{api:n,isAuthed:f,user:p}=(0,u.Rv)(),j=(null==p?void 0:p.id)===t.user_id,g=(0,o.useRouter)(),v=(0,d.useCallback)(()=>{(0,h.G0)(n,t,e=>g.push("/"))},[n,g,t]);return f&&j?(0,l.jsxs)("span",{className:"absolute left-[90%] lg:left-[50%] top-1/2 translate-y-[-50%] lg:translate-y-0 lg:top-8 translate-x-[-50%] flex lg:flex-col flex-row lg:space-y-2 lg:space-x-0 space-x-2",children:[(0,l.jsx)(c.default,{href:"/edit/".concat(t.hash),className:x,children:(0,l.jsx)(r.Z,{className:m})}),s&&(0,l.jsx)("a",{role:"button",onClick:v,className:i()(x,"opacity-40 hover:opacity-100"),children:(0,l.jsx)(a.Z,{className:i()(m,"text-red-500")})})]}):(0,l.jsx)(l.Fragment,{})}},80939:function(e,s,t){"use strict";t.d(s,{H:function(){return l.EditSelfieButton}});var l=t(90173)},14084:function(e,s,t){"use strict";t.d(s,{$O:function(){return d.CommentList},He:function(){return c.H},n4:function(){return o.LoveSelfie},F0:function(){return l.F},Lh:function(){return n.SelfieCardLoader},WV:function(){return a.W},Y2:function(){return i.SelfieDate},Dj:function(){return r.SelfiesAsyncLoader}});var l=t(46171);t(57437),t(30105);var r=t(67431);t(67358),t(44692);var a=t(96433),n=t(62466),i=t(32355);t(81138);var c=t(80939),o=t(302);t(19649),t(27421),t(99525),t(94404);var d=t(11683);t(81121)},302:function(e,s,t){"use strict";t.r(s),t.d(s,{LoveSelfie:function(){return d}});var l=t(57437),r=t(56800),a=t.n(r),n=t(2265),i=t(70191),c=t(30727);let o=e=>{let{count:s}=e;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(c.Z,{className:"absolute top-0 mx-auto size-10 text-red-500"}),(0,l.jsx)("span",{className:"relative z-10 top-2 w-full text-center text-white text-sm inline-block",children:s})]})},d=e=>{let{selfie:s}=e,{api:t,isAuthed:r}=(0,i.Rv)(),[c,d]=(0,n.useState)(s.loves),[u,h]=(0,n.useState)(1===s.love);return(0,l.jsx)("span",{className:"absolute left-[50%] top-1/2 translate-y-[-50%] lg:translate-y-0 lg:-top-3 translate-x-[-50%]",children:r?(0,l.jsx)("a",{role:"button",onClick:()=>{d(e=>u?e-1:e+1),h(e=>!e),t({url:"/api/love",body:{selfie:s.hash}}).then(e=>e.responseData).catch(e=>{console.error(e),d(e=>u?e+1:e-1),h(e=>!e)})},className:a()("cursor-pointer inline-block hover:drop-shadow-sm transition-all relative select-none w-10",!r||s.love?"opacity-100":"opacity-80 hover:opacity-100 hover:drop-shadow"),children:(0,l.jsx)(o,{count:c})}):(0,l.jsx)("span",{className:"relative inline-block w-10",children:(0,l.jsx)(o,{count:c})})})}},27421:function(e,s,t){"use strict";t.r(s),t.d(s,{SelfiePrevNext:function(){return i}});var l=t(57437),r=t(66648),a=t(70603),n=t(42874);let i=()=>{let{prev:e,next:s,loadSelfie:t}=(0,a.T)();return(0,l.jsxs)(l.Fragment,{children:[e&&(0,l.jsxs)("a",{role:"button",className:"cursor-pointer opacity-30 hover:opacity-50 left-0 h-full absolute translate-x-[-100%] transition-opacity",onClick:()=>t(e.active_hash),children:[(0,l.jsx)(r.default,{src:(0,n.Jj)(e),alt:"Previous image: "+e.title,className:"h-full w-auto",width:1e3,height:750}),(0,l.jsx)(r.default,{src:(0,n.iQ)(e),alt:"Previous image: "+e.title,className:"-left-[1000rem] absolute",width:1e3,height:750})]}),s&&(0,l.jsxs)("a",{role:"button",className:"cursor-pointer opacity-30 hover:opacity-50 right-0 h-full absolute translate-x-[100%] transition-opacity",onClick:()=>t(s.active_hash),children:[(0,l.jsx)(r.default,{src:(0,n.iQ)(s),alt:"Next image: "+s.title,className:"h-full w-auto",width:1e3,height:750}),(0,l.jsx)(r.default,{src:(0,n.Jj)(s),alt:"Previous image: "+s.title,className:"-left-[1000rem] absolute",width:1e3,height:750})]})]})}},19649:function(e,s,t){"use strict";t.r(s),t.d(s,{SingleSelfie:function(){return w}});var l=t(57437),r=t(90372),a=t(89698),n=t(930),i=t(73356),c=t(76192),o=t(96442),d=t(57818),u=t(66648),h=t(87138),x=t(80311);let m=/(?:https:\/\/travel\.kupfer\.es)?\/s\/([a-zA-Z0-9]+)/g,f=e=>{let s=[],t=0;return e.replace(m,(r,a,n)=>(s.push((0,l.jsx)("span",{className:"quill-part",dangerouslySetInnerHTML:{__html:e.substring(t,n)}},t)),s.push((0,l.jsx)(x.Lh,{hash:a},n)),t=n+r.length,r)),s.push((0,l.jsx)("span",{dangerouslySetInnerHTML:{__html:e.substring(t)}},t)),s};var p=t(26794),j=t(32367),g=t(70603),v=t(42874),A=t(27421);let b=(0,d.default)(()=>Promise.resolve().then(t.bind(t,79627)).then(e=>e.MapViewer),{loadableGenerated:{webpack:()=>[79627]},ssr:!1}),w=e=>{let{exists:s=!0}=e,{selfie:t}=(0,g.T)(),d=(0,v.SH)(t),m=(0,v.SH)(t,"lc"),w=(0,v.Ww)(t);return(0,l.jsx)("div",{className:"flex flex-col max-w-screen py-[var(--header-height)] relative fill-screen overflow-hidden",style:{background:(0,v.OH)(t.me_color,t.lc_color)},children:(0,l.jsxs)("div",{className:"flex flex-col mx-auto w-[calc(100vw-100px)] md:w-[calc(100vw-200px)] lg:w-[calc(100vw-300px)]",children:[(0,l.jsxs)("div",{role:"header",className:"flex md:flex-row md:items-center md:justify-between md:space-y-0 flex-col space-y-2 py-4",children:[(0,l.jsxs)("div",{className:"flex flex-col space-y-4",children:[(0,l.jsx)(o.ZP,{level:"h1",sx:{color:d},children:t.title}),(0,l.jsx)(o.ZP,{level:"h3",sx:{color:d},children:t.short_desc})]}),s&&(0,l.jsxs)("div",{className:"flex flex-col min-w-max text-base text-[".concat(m,"]"),children:[(0,l.jsxs)("span",{className:"flex justify-between",children:[(0,l.jsxs)(h.default,{href:"/u/".concat(t.username),className:"fric space-x-2 as-link",children:[(0,l.jsx)(r.Z,{className:"size-4"}),(0,l.jsx)("small",{children:"by"}),(0,l.jsxs)("span",{children:["@",t.username]})]}),(0,l.jsx)(p.mu,{className:"bg-white p-1 text-black rounded-full",icon:(0,l.jsx)(a.Z,{className:"size-4 hover:text-blue-500"})})]}),(0,l.jsx)(x.Y2,{icon:(0,l.jsx)(n.Z,{className:"size-4"}),label:"taken",date:t.selfie_date,isDate:!0}),(0,l.jsx)(x.Y2,{icon:(0,l.jsx)(i.Z,{className:"size-4"}),label:"added",date:t.added_on}),(0,l.jsxs)("span",{className:"fric space-x-2",children:[(0,l.jsx)(c.Z,{className:"size-4"}),(0,l.jsx)("small",{children:"in"}),(0,l.jsx)("span",{children:t.selfie_place})]})]})]}),(0,l.jsxs)("div",{role:"content",className:"grid grid-flow-col lg:grid-flow-row grid-cols-1 grid-rows-2 lg:grid-rows-1 lg:grid-cols-2 relative",children:[s&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(x.n4,{selfie:t}),(0,l.jsx)(x.He,{selfie:t,allowDelete:!0})]}),(0,l.jsx)(u.default,{src:s?(0,v.iQ)(t):j.Ty,alt:"My image for "+t.title,className:"w-full aspect-[4/3]",width:1e3,height:750,priority:!0}),(0,l.jsx)(u.default,{src:s?(0,v.Jj)(t):j.Ty,alt:"Landscape image for "+t.title,className:"w-full aspect-[4/3]",width:1e3,height:750,priority:!0}),s&&(0,l.jsx)(A.SelfiePrevNext,{})]}),s&&(0,l.jsxs)("div",{className:"grid grid-flow-col lg:grid-flow-row grid-rows-2 grid-cols-1 lg:grid-cols-2 lg:grid-rows-1",children:[(0,l.jsx)(b,{markers:[w],style:"satellite",className:"min-h-96 max-h-[45rem] w-full block"}),(0,l.jsx)(x.$O,{selfie:t})]}),t.long_desc.length>=5&&(0,l.jsx)("div",{className:"w-full border mx-auto p-16 flex flex-col justify-center",style:{color:d},children:f(t.long_desc)})]})})}},96905:function(e,s,t){"use strict";t.r(s),t.d(s,{UserPageHeader:function(){return j}});var l=t(57437),r=t(96442),a=t(89649),n=t(3795),i=t(2265),c=t(27776),o=t(70191),d=t(42874),u=t(84982),h=t(76192),x=t(56800),m=t.n(x),f=t(26794);let p=e=>{let{username:s}=e,{api:t}=(0,o.Rv)(),[r,n]=(0,i.useState)(!1),[x,p]=(0,i.useState)(void 0);return(0,i.useEffect)(()=>{r&&!x&&t({url:"/api/history",body:{username:s}}).then(d.xO).then(e=>{let{mapSelfies:s,mapSelfiesRange:t}=e;p({mapSelfies:s,mapSelfiesRange:t})}).catch(e=>{c.toast.error(String(e)),console.error(e)})},[t,x,r,s]),(0,l.jsx)(l.Fragment,{children:r?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(a.Z,{onClick:()=>n(!1),variant:"soft",size:"sm",color:"neutral",children:[(0,l.jsx)(u.Z,{className:"size-4"})," \xa0 close map"]}),(null==x?void 0:x.mapSelfiesRange)?(0,l.jsx)(f.J7,{className:"relative h-[60rem] max-h-[80vh] w-full",range:x.mapSelfiesRange,selfies:x.mapSelfies,pinUrl:"view"}):(0,l.jsx)("span",{className:m()("relative h-[60rem] max-h-[80vh] w-full fric justify-center",(0,d.Ij)({loading:!0,spinner:!0})),"data-loading":"loading map..."})]}):(0,l.jsxs)(a.Z,{onClick:()=>n(!0),variant:"soft",size:"sm",color:"neutral",children:[(0,l.jsx)(h.Z,{className:"size-4"})," \xa0 see on a map"]})})},j=e=>{let{user:s}=e,{api:t,isAuthed:u,user:h}=(0,o.Rv)(),[x,m]=(0,i.useState)(u&&s.username!==h.username?!!s.ifollow:null),f=s.followers-Number(s.ifollow)+Number(x);return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{className:"flex flex-col space-y-4 justify-center w-full",children:[(0,l.jsxs)("div",{className:"fric justify-center space-x-6",children:[(0,l.jsxs)(r.ZP,{level:"h1",children:["@",s.username]}),null!==x&&(0,l.jsx)(a.Z,{size:"sm",onClick:()=>{m(e=>!e),t({url:"/api/follow",body:{username:s.username}}).catch(e=>{m(e=>!e),c.toast.error(String(e))})},color:x?"neutral":"success",variant:"soft",sx:{p:.5},children:x?"following":"follow"})]}),(0,l.jsxs)("div",{className:"fric space-x-8 w-full",children:[(0,l.jsx)(n.Z,{src:s.avatar,alt:s.name,sx:{width:128,height:128},variant:"outlined"}),(0,l.jsxs)("div",{className:"flex flex-col space-y-4 shrink basis-full",children:[(0,l.jsxs)("div",{className:"fric justify-between",children:[(0,l.jsx)("span",{children:(0,d.gY)(s.pictures,["picture","pictures"])}),(0,l.jsx)("span",{children:(0,d.gY)(f,["follower","followers"])}),(0,l.jsxs)("span",{children:[s.following," following"]})]}),(0,l.jsxs)("p",{children:[(0,l.jsx)(r.ZP,{level:"body-lg",sx:{fontWeight:"bold"},children:s.name})," ",(0,l.jsx)(r.ZP,{children:s.profile})]})]})]}),s.pictures>=1&&(0,l.jsx)(p,{username:s.username})]})})}},70603:function(e,s,t){"use strict";t.d(s,{R:function(){return r},T:function(){return a}});var l=t(2265);let r=(0,l.createContext)({selfie:{},prev:null,next:null,exists:!1,loadSelfie:()=>null,_insideContext_:!1}),a=()=>{let e=(0,l.useContext)(r);if(!e._insideContext_)throw Error("`useSingleSelfieContext` must be used inside of `SingleSelfieContext`.");return e}},92064:function(e,s,t){"use strict";t.d(s,{B:function(){return r}}),t(74590);var l=t(58064),r=(0,l.$)("d9e397464a7b483fdb64e6b1b2077a5960e840e0");(0,l.$)("a07630e77e02637849043dfe92df4063862c46c7")},33222:function(){},16628:function(){},65143:function(e,s,t){"use strict";t.r(s),s.default={src:"/_next/static/media/thats-all-folks.37880f0f.jpg",height:457,width:883,blurDataURL:"data:image/jpeg;base64,/9j/2wBDAAoHBwgHBgoICAgLCgoLDhgQDg0NDh0VFhEYIx8lJCIfIiEmKzcvJik0KSEiMEExNDk7Pj4+JS5ESUM8SDc9Pjv/2wBDAQoLCw4NDhwQEBw7KCIoOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozv/wgARCAAEAAgDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAGWD//EABUQAQEAAAAAAAAAAAAAAAAAABIi/9oACAEBAAEFAlP/xAAUEQEAAAAAAAAAAAAAAAAAAAAA/9oACAEDAQE/AX//xAAUEQEAAAAAAAAAAAAAAAAAAAAA/9oACAECAQE/AX//xAAVEAEBAAAAAAAAAAAAAAAAAAAAQf/aAAgBAQAGPwKP/8QAGBABAQADAAAAAAAAAAAAAAAAAREAMUH/2gAIAQEAAT8hoUBzWf/aAAwDAQACAAMAAAAQ8//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQMBAT8Qf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQIBAT8Qf//EABgQAQADAQAAAAAAAAAAAAAAAAEAESFh/9oACAEBAAE/EGgYGAt92f/Z",blurWidth:8,blurHeight:4}},47993:function(e,s,t){"use strict";t.r(s),s.default={src:"/_next/static/media/logo.4290582f.png",height:238,width:238,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAb1BMVEUzldsmsV80lt40m9Iot2EqgMQpk5wpgbpMaXEwk8wzo8cxt6MzmdExr6ooi6EntF4plpIojJ4mrGAopHspjawtrHgztbApp3swxIcpiK8vyYIu0W0zmdspmJAyv58qvWM4pugu0G8rnZ8rpJM2s8uwJAtaAAAAHXRSTlP+ouX5I/7n/gAjpOLp/v7h5aP54aAiov3m6aLmo98/8JEAAAAJcEhZcwACTo0AAk6NAUB6lrwAAABFSURBVHicBcEHAoAgDASwA4G27r1Z6v/faAI2g6tLYZjusUiVgXqJUIQVPRGhyTucby1CvjDH0QPfCZnihqQFvKhD38I/eHgDm+Zax+wAAAAASUVORK5CYII=",blurWidth:8,blurHeight:8}}}]);