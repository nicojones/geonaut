(()=>{var e={};e.id=455,e.ids=[455],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},41808:e=>{"use strict";e.exports=require("net")},71017:e=>{"use strict";e.exports=require("path")},77282:e=>{"use strict";e.exports=require("process")},12781:e=>{"use strict";e.exports=require("stream")},71576:e=>{"use strict";e.exports=require("string_decoder")},39512:e=>{"use strict";e.exports=require("timers")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},95943:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>o.a,__next_app__:()=>h,originalPathname:()=>u,pages:()=>c,routeModule:()=>f,tree:()=>d}),t(93211),t(77972),t(79109),t(11930),t(35866);var r=t(23191),n=t(88716),i=t(37922),o=t.n(i),a=t(95231),l={};for(let e in a)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>a[e]);t.d(s,l);let d=["",{children:["dashboard",{children:["settings",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,93211)),"/Users/pulze/Documents/Projects/travel/src/app/dashboard/settings/page.tsx"]}]},{}]},{loading:[()=>Promise.resolve().then(t.bind(t,77972)),"/Users/pulze/Documents/Projects/travel/src/app/dashboard/loading.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,79109)),"/Users/pulze/Documents/Projects/travel/src/app/layout.tsx"],loading:[()=>Promise.resolve().then(t.bind(t,11930)),"/Users/pulze/Documents/Projects/travel/src/app/loading.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["/Users/pulze/Documents/Projects/travel/src/app/dashboard/settings/page.tsx"],u="/dashboard/settings/page",h={require:t,loadChunk:()=>Promise.resolve()},f=new r.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/dashboard/settings/page",pathname:"/dashboard/settings",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},62178:(e,s,t)=>{let r={bdfee48ae750ffa93f9a762ed393c43dfbf10d0a:()=>Promise.resolve().then(t.bind(t,1635)).then(e=>e.$$ACTION_0),e0452359b773ffa19b2ee032affea0c6869bfe57:()=>Promise.resolve().then(t.bind(t,1635)).then(e=>e.saveEditSelfie),"4f35886507c36e4ad4dd50b8e7bea9f60ebddec5":()=>Promise.resolve().then(t.bind(t,91823)).then(e=>e.$$ACTION_0),b1a41dc2655d851f110a3d69243a3ac2141b1080:()=>Promise.resolve().then(t.bind(t,91823)).then(e=>e.fetchComments),"5692b1ddfa574de66f333084358053296041dcd1":()=>Promise.resolve().then(t.bind(t,1064)).then(e=>e.$$ACTION_0),a07630e77e02637849043dfe92df4063862c46c7:()=>Promise.resolve().then(t.bind(t,1064)).then(e=>e.searchAll),d9e397464a7b483fdb64e6b1b2077a5960e840e0:()=>Promise.resolve().then(t.bind(t,1064)).then(e=>e.getSearchResults),"983baa83e0a03e99625a9bdc94f449d6c178d96c":()=>Promise.resolve().then(t.bind(t,72098)).then(e=>e.dbGetSelfies),daa99a2f9dd7c05e33652ec8b77fa9221c06d7c8:()=>Promise.resolve().then(t.bind(t,72098)).then(e=>e.$$ACTION_0)};async function n(e,...s){return(await r[e]()).apply(null,s)}e.exports={bdfee48ae750ffa93f9a762ed393c43dfbf10d0a:n.bind(null,"bdfee48ae750ffa93f9a762ed393c43dfbf10d0a"),e0452359b773ffa19b2ee032affea0c6869bfe57:n.bind(null,"e0452359b773ffa19b2ee032affea0c6869bfe57"),"4f35886507c36e4ad4dd50b8e7bea9f60ebddec5":n.bind(null,"4f35886507c36e4ad4dd50b8e7bea9f60ebddec5"),b1a41dc2655d851f110a3d69243a3ac2141b1080:n.bind(null,"b1a41dc2655d851f110a3d69243a3ac2141b1080"),"5692b1ddfa574de66f333084358053296041dcd1":n.bind(null,"5692b1ddfa574de66f333084358053296041dcd1"),a07630e77e02637849043dfe92df4063862c46c7:n.bind(null,"a07630e77e02637849043dfe92df4063862c46c7"),d9e397464a7b483fdb64e6b1b2077a5960e840e0:n.bind(null,"d9e397464a7b483fdb64e6b1b2077a5960e840e0"),"983baa83e0a03e99625a9bdc94f449d6c178d96c":n.bind(null,"983baa83e0a03e99625a9bdc94f449d6c178d96c"),daa99a2f9dd7c05e33652ec8b77fa9221c06d7c8:n.bind(null,"daa99a2f9dd7c05e33652ec8b77fa9221c06d7c8")}},920:(e,s,t)=>{Promise.resolve().then(t.bind(t,9131)),Promise.resolve().then(t.t.bind(t,92481,23)),Promise.resolve().then(t.t.bind(t,79404,23)),Promise.resolve().then(t.bind(t,85999)),Promise.resolve().then(t.bind(t,656)),Promise.resolve().then(t.bind(t,19665)),Promise.resolve().then(t.bind(t,16043)),Promise.resolve().then(t.bind(t,48221)),Promise.resolve().then(t.bind(t,45086)),Promise.resolve().then(t.bind(t,89217)),Promise.resolve().then(t.bind(t,14295)),Promise.resolve().then(t.bind(t,10613)),Promise.resolve().then(t.bind(t,68132)),Promise.resolve().then(t.bind(t,47132)),Promise.resolve().then(t.bind(t,52116)),Promise.resolve().then(t.bind(t,35209)),Promise.resolve().then(t.bind(t,28003)),Promise.resolve().then(t.bind(t,13294)),Promise.resolve().then(t.bind(t,10006)),Promise.resolve().then(t.bind(t,3952)),Promise.resolve().then(t.bind(t,38911)),Promise.resolve().then(t.bind(t,47112)),Promise.resolve().then(t.bind(t,68813)),Promise.resolve().then(t.bind(t,26733)),Promise.resolve().then(t.bind(t,88313)),Promise.resolve().then(t.bind(t,59805)),Promise.resolve().then(t.bind(t,66009)),Promise.resolve().then(t.bind(t,79951)),Promise.resolve().then(t.bind(t,71131))},53660:(e,s,t)=>{Promise.resolve().then(t.bind(t,9131)),Promise.resolve().then(t.t.bind(t,92481,23)),Promise.resolve().then(t.t.bind(t,79404,23)),Promise.resolve().then(t.bind(t,85999)),Promise.resolve().then(t.bind(t,19665)),Promise.resolve().then(t.bind(t,16043)),Promise.resolve().then(t.bind(t,48221)),Promise.resolve().then(t.bind(t,45086)),Promise.resolve().then(t.bind(t,89217)),Promise.resolve().then(t.bind(t,14295)),Promise.resolve().then(t.bind(t,10613)),Promise.resolve().then(t.bind(t,68132)),Promise.resolve().then(t.bind(t,47132)),Promise.resolve().then(t.bind(t,52116)),Promise.resolve().then(t.bind(t,35209)),Promise.resolve().then(t.bind(t,28003)),Promise.resolve().then(t.bind(t,13294)),Promise.resolve().then(t.bind(t,10006)),Promise.resolve().then(t.bind(t,3952)),Promise.resolve().then(t.bind(t,38911)),Promise.resolve().then(t.bind(t,47112)),Promise.resolve().then(t.bind(t,68813)),Promise.resolve().then(t.bind(t,26733)),Promise.resolve().then(t.bind(t,88313)),Promise.resolve().then(t.bind(t,59805)),Promise.resolve().then(t.bind(t,66009)),Promise.resolve().then(t.bind(t,79951)),Promise.resolve().then(t.bind(t,71131))},656:(e,s,t)=>{"use strict";t.d(s,{SettingsForm:()=>E});var r=t(10326),n=t(13191),i=t(99849),o=t(32226),a=t(59732),l=t(11437),d=t(24719),c=t(52664),u=t(15656),h=t(30594),f=t(46226),m=t(17577),p=t(85999),b=t(40480),v=t(16106),g=t(11220),x=t(16254),_=t(62424),P=t(60638),j=t(80560),y=t(48029),w=t.n(y);t(15424);var S=(0,t(46242).$)("983baa83e0a03e99625a9bdc94f449d6c178d96c");let O=({value:e,onChange:s})=>{let{user:t}=(0,v.Rv)(),[n,i]=(0,m.useState)({loaded:null,data:null});(0,m.useEffect)(()=>{!1===n.loaded&&(n.data&&i(e=>({...e,loaded:!0})),S({selfId:t?.id,userId:t?.id,skip:0,limit:1e5}).then(e=>{i({loaded:!0,data:e})}))},[n]);let o=e=>{i(e=>({...e,loaded:null})),s(e)};return(0,r.jsxs)(a.Z,{children:[r.jsx(l.Z,{children:"profile picture"}),null===n.loaded?(0,r.jsxs)(_.Z,{variant:"plain",className:"fric space-x-2",onClick:()=>i(e=>({...e,loaded:!1})),children:[r.jsx(f.default,{className:"w-36 aspect-[4/3] shrink-0 grow-0 rounded",src:(0,g.iQ)({hash:e},!0),width:666,height:500,alt:"Profile picture"}),r.jsx("span",{children:"change"})]}):r.jsx(P.Z,{className:"inline-block w-full",children:n.loaded?(n.data??[]).map(s=>r.jsx(f.default,{className:w()("float-left transition-opacity hover:opacity-100 cursor-pointer w-4/12 md:w-3/12 lg:w-2/12",{"opacity-40":s.hash!==e}),src:(0,g.iQ)(s,!0),width:250,height:250,alt:s.title,onClick:()=>o(s.hash)},s.hash)):(0,g.w6)(0,24).map(e=>r.jsx("span",{className:" aspect-square w-4/12 md:w-3/12 lg:w-2/12 float-left relative p-1",children:r.jsx(j.Z,{className:"m-1 w-[calc(100%-8px)] h-[calc(100%-8px)]",animation:"wave"},e)},e))})]})},R=({disabled:e=!1,loading:s=!1})=>r.jsx(_.Z,{type:"submit",variant:"solid",size:"lg",className:"w-full",disabled:e,loading:s,children:"save"}),E=({settings:e})=>{let{api:s,setJwt:t}=(0,v.Rv)(),[_,P]=(0,m.useState)(e),[j,y]=(0,m.useState)({}),[w,S]=(0,m.useState)(!1),E=Object.keys(j).length>0,N=e=>s=>P(t=>({...t,[e]:s.target.value})),Z=(0,m.useCallback)(e=>{e.preventDefault(),S(!0),s({method:"POST",body:_,url:"/api/settings/save"}).then(g.xO).then(e=>{(0,p.toast)(e.message),t(e.token)}).catch(e=>{p.toast.error(e.message)}).finally(()=>S(!1))},[s,_,t]);return(0,m.useLayoutEffect)(()=>{x.L4.safeParseAsync(_).then(e=>{e.success?y({}):y((0,g.Uo)(e.error.issues))}).catch(e=>{console.error(e)})},[_]),(0,r.jsxs)("form",{onSubmit:Z,className:"flex flex-col space-y-4",children:[(0,r.jsxs)(a.Z,{error:!!j.name,children:[r.jsx(l.Z,{children:"full name"}),r.jsx(d.ZP,{value:_.name,onChange:N("name"),startDecorator:r.jsx(n.Z,{className:"size-3"})}),j.name&&r.jsx(c.Z,{children:j.name}),r.jsx(c.Z,{children:"enter your full name as you'd like people to see it"})]}),(0,r.jsxs)(a.Z,{error:!!j.username,children:[r.jsx(l.Z,{children:"username"}),r.jsx(d.ZP,{value:_.username,onChange:N("username"),startDecorator:"@"}),j.username&&r.jsx(c.Z,{children:j.username}),r.jsx(c.Z,{children:"this will be your username, @handle, and in the URL"})]}),(0,r.jsxs)(a.Z,{error:!!j.email,children:[r.jsx(l.Z,{children:"email"}),r.jsx(d.ZP,{value:_.email,onChange:N("email"),type:"email",startDecorator:r.jsx(i.Z,{className:"size-3"})}),j.email&&r.jsx(c.Z,{children:j.email}),(0,r.jsxs)(c.Z,{children:[r.jsx("i",{children:"nobody"}),"\xa0can see this"]})]}),(0,r.jsxs)(a.Z,{error:!!j.short_desc,sx:{gridColumn:"1/-1"},children:[r.jsx(l.Z,{children:"summary"}),r.jsx(d.ZP,{value:_.short_desc,onChange:N("short_desc")}),j.short_desc&&r.jsx(c.Z,{children:j.short_desc})]}),(0,r.jsxs)(a.Z,{error:!!j.gender,sx:{gridColumn:"1/-1"},children:[r.jsx(l.Z,{children:"pronouns"}),(0,r.jsxs)(u.Z,{name:"gender",value:_.gender,onChange:(e,s)=>P(e=>({...e,gender:s??0})),children:[r.jsx(h.Z,{value:0,children:"neutral (they / them / their)"}),r.jsx(h.Z,{value:1,children:"male (he / him / his)"}),r.jsx(h.Z,{value:2,children:"female (she / her / hers)"})]}),j.gender&&r.jsx(c.Z,{children:j.gender})]}),(0,r.jsxs)("div",{className:"flex flex-col space-y-4 lg:flex-row lg:space-x-4 lg:space-y-0",children:[(0,r.jsxs)(a.Z,{error:!!j.password,className:"grow",children:[r.jsx(l.Z,{children:"password"}),r.jsx(d.ZP,{value:_.password??"",onChange:N("password"),startDecorator:r.jsx(o.Z,{className:"size-3"}),type:"password",placeholder:"********"}),j.password&&r.jsx(c.Z,{children:j.password}),r.jsx(c.Z,{children:"(if you want to change it)"})]}),(0,r.jsxs)(a.Z,{error:!!j.confirm,className:"grow",children:[r.jsx(l.Z,{children:"confirm password"}),r.jsx(d.ZP,{value:_.confirm??"",onChange:N("confirm"),startDecorator:r.jsx(o.Z,{className:"size-3"}),type:"password",placeholder:"********"}),j.confirm&&r.jsx(c.Z,{children:j.confirm}),r.jsx(c.Z,{children:_.password?"please confirm the password":"(if you want to change it)"})]})]}),(0,r.jsxs)("div",{className:"flex flex-col space-y-4 lg:flex-row lg:space-x-4 lg:space-y-0",children:[r.jsx(b.uN,{onClick:()=>P(e=>({...e,bell_position:"menu"})),selected:"menu"===_.bell_position,children:r.jsx(f.default,{src:"/images/icons/generic/bell-menu.png",alt:"Notification bell in the menu",width:250,height:250})}),r.jsx(b.uN,{onClick:()=>P(e=>({...e,bell_position:"top"})),selected:"top"===_.bell_position,children:r.jsx(f.default,{src:"/images/icons/generic/bell-top.png",alt:"Notification bell in the top header",width:250,height:250})})]}),r.jsx("hr",{}),r.jsx(O,{value:_.profile_pic,onChange:e=>P(s=>({...s,profile_pic:e}))}),r.jsx(R,{disabled:E,loading:w})]})}},58585:(e,s,t)=>{"use strict";var r=t(61085);t.o(r,"redirect")&&t.d(s,{redirect:function(){return r.redirect}})},61085:(e,s,t)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),function(e,s){for(var t in s)Object.defineProperty(e,t,{enumerable:!0,get:s[t]})}(s,{ReadonlyURLSearchParams:function(){return o},RedirectType:function(){return r.RedirectType},notFound:function(){return n.notFound},permanentRedirect:function(){return r.permanentRedirect},redirect:function(){return r.redirect}});let r=t(83953),n=t(16399);class i extends Error{constructor(){super("Method unavailable on `ReadonlyURLSearchParams`. Read more: https://nextjs.org/docs/app/api-reference/functions/use-search-params#updating-searchparams")}}class o extends URLSearchParams{append(){throw new i}delete(){throw new i}set(){throw new i}sort(){throw new i}}("function"==typeof s.default||"object"==typeof s.default&&null!==s.default)&&void 0===s.default.__esModule&&(Object.defineProperty(s.default,"__esModule",{value:!0}),Object.assign(s.default,s),e.exports=s.default)},16399:(e,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),function(e,s){for(var t in s)Object.defineProperty(e,t,{enumerable:!0,get:s[t]})}(s,{isNotFoundError:function(){return n},notFound:function(){return r}});let t="NEXT_NOT_FOUND";function r(){let e=Error(t);throw e.digest=t,e}function n(e){return"object"==typeof e&&null!==e&&"digest"in e&&e.digest===t}("function"==typeof s.default||"object"==typeof s.default&&null!==s.default)&&void 0===s.default.__esModule&&(Object.defineProperty(s.default,"__esModule",{value:!0}),Object.assign(s.default,s),e.exports=s.default)},8586:(e,s)=>{"use strict";var t;Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"RedirectStatusCode",{enumerable:!0,get:function(){return t}}),function(e){e[e.SeeOther=303]="SeeOther",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect"}(t||(t={})),("function"==typeof s.default||"object"==typeof s.default&&null!==s.default)&&void 0===s.default.__esModule&&(Object.defineProperty(s.default,"__esModule",{value:!0}),Object.assign(s.default,s),e.exports=s.default)},83953:(e,s,t)=>{"use strict";var r;Object.defineProperty(s,"__esModule",{value:!0}),function(e,s){for(var t in s)Object.defineProperty(e,t,{enumerable:!0,get:s[t]})}(s,{RedirectType:function(){return r},getRedirectError:function(){return l},getRedirectStatusCodeFromError:function(){return m},getRedirectTypeFromError:function(){return f},getURLFromRedirectError:function(){return h},isRedirectError:function(){return u},permanentRedirect:function(){return c},redirect:function(){return d}});let n=t(54580),i=t(72934),o=t(8586),a="NEXT_REDIRECT";function l(e,s,t){void 0===t&&(t=o.RedirectStatusCode.TemporaryRedirect);let r=Error(a);r.digest=a+";"+s+";"+e+";"+t+";";let i=n.requestAsyncStorage.getStore();return i&&(r.mutableCookies=i.mutableCookies),r}function d(e,s){void 0===s&&(s="replace");let t=i.actionAsyncStorage.getStore();throw l(e,s,(null==t?void 0:t.isAction)?o.RedirectStatusCode.SeeOther:o.RedirectStatusCode.TemporaryRedirect)}function c(e,s){void 0===s&&(s="replace");let t=i.actionAsyncStorage.getStore();throw l(e,s,(null==t?void 0:t.isAction)?o.RedirectStatusCode.SeeOther:o.RedirectStatusCode.PermanentRedirect)}function u(e){if("object"!=typeof e||null===e||!("digest"in e)||"string"!=typeof e.digest)return!1;let[s,t,r,n]=e.digest.split(";",4),i=Number(n);return s===a&&("replace"===t||"push"===t)&&"string"==typeof r&&!isNaN(i)&&i in o.RedirectStatusCode}function h(e){return u(e)?e.digest.split(";",3)[2]:null}function f(e){if(!u(e))throw Error("Not a redirect error");return e.digest.split(";",2)[1]}function m(e){if(!u(e))throw Error("Not a redirect error");return Number(e.digest.split(";",4)[3])}(function(e){e.push="push",e.replace="replace"})(r||(r={})),("function"==typeof s.default||"object"==typeof s.default&&null!==s.default)&&void 0===s.default.__esModule&&(Object.defineProperty(s.default,"__esModule",{value:!0}),Object.assign(s.default,s),e.exports=s.default)},77972:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});var r=t(19510),n=t(63401),i=t(68678),o=t(29098);async function a(){return(0,r.jsxs)(o.Cq,{children:[r.jsx(n.Skeleton,{animation:"wave",variant:"text",level:"h1",sx:{width:"100%"}}),r.jsx(i.WV,{})]})}},93211:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>m,metadata:()=>h});var r=t(19510),n=t(68678),i=t(29098),o=t(71116),a=t(68570);let l=(0,a.createProxy)(String.raw`/Users/pulze/Documents/Projects/travel/src/app/dashboard/settings/SettingsForm.tsx`),{__esModule:d,$$typeof:c}=l;l.default;let u=(0,a.createProxy)(String.raw`/Users/pulze/Documents/Projects/travel/src/app/dashboard/settings/SettingsForm.tsx#SettingsForm`),h={title:"settings - geonaut"},f=()=>(0,o.P)({url:"/api/admin/data",body:{s:"settings"},cacheTags:["__settings__"]}).then(e=>e.settings);async function m(){let e=await f();return(0,r.jsxs)(i.Cq,{children:[r.jsx(n.M5,{sticky:!0,header:"settings",small:!0}),r.jsx(u,{settings:e})]})}},72098:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$ACTION_0:()=>a,dbGetSelfies:()=>o});var r=t(27745);t(26461);var n=t(63968),i=t(85723);let o=(0,r.registerServerReference)("daa99a2f9dd7c05e33652ec8b77fa9221c06d7c8",a);async function a({selfId:e=0,userId:s=0,skip:t=0,limit:r=10}){let[i,o]=await (0,n.getDbConnection)();if(s){let[n,a]=await i.query(`
      SELECT
              s.id, s.user_id, s.active_hash, s.hash, s.title, s.short_desc, s.selfie_date,
              s.selfie_place, s.lat, s.lng, s.selfietype_id, s.added_on, s.edited_on,
              s.lc_color, s.me_color, s.lc_brightness, s.me_brightness, s.username, s.name, s.possessive,
              IF(l.user_id = :selfId, 1, 0) AS love,
              -- IF(f.follower = :selfId, 1, 0) AS following,
              'profile' AS 'type',
              COALESCE(lc.loves, 0) as loves
      FROM selfies_with_user s
      LEFT JOIN love l ON (s.id = l.selfie_id AND :selfId = l.user_id)
      -- LEFT JOIN follow f ON s.user_id = f.followed
      LEFT JOIN love_count lc ON lc.selfie_id = s.id
      WHERE (s.user_id = :userId)
      GROUP BY s.id, s.user_id, s.active_hash, s.hash, s.title, s.short_desc, s.selfie_date,
                s.selfie_place, s.lat, s.lng, s.selfietype_id, s.added_on, s.edited_on,
                s.lc_color, s.lc_brightness, s.me_color, s.me_brightness, s.username, s.name, s.possessive,
                'type', love, loves
      ORDER BY s.selfie_date DESC, s.added_on DESC LIMIT :skip, :limit
      `,{userId:s,selfId:e,skip:t,limit:r});return o(),n}{let[s,n]=await i.query(`
        SELECT
              s.id, s.user_id, s.active_hash, s.hash, s.title, s.short_desc, s.selfie_date,
              s.selfie_place, s.lat, s.lng, s.selfietype_id, s.added_on, s.edited_on,
              s.lc_color, s.me_color, s.lc_brightness, s.me_brightness, s.username, s.name, s.possessive,
              IF(l.user_id = :selfId, 1, 0) AS love,
              -- IF(f.follower = :selfId, 1, 0) AS following,
              'selfie' AS 'type',
              COALESCE(lc.loves, 0) as loves
        FROM selfies_with_user s
        LEFT JOIN love l ON (s.id = l.selfie_id AND :selfId = l.user_id)
        -- LEFT JOIN follow f ON s.user_id = f.followed
        LEFT JOIN love_count lc ON lc.selfie_id = s.id
        GROUP BY s.id, s.user_id, s.active_hash, s.hash, s.title, s.short_desc, s.selfie_date,
                  s.selfie_place, s.lat, s.lng, s.selfietype_id, s.added_on, s.edited_on,
                  s.lc_color, s.lc_brightness, s.me_color, s.me_brightness,
                  s.username, s.name, s.possessive,
                  'type', love, loves
        ORDER BY s.added_on DESC LIMIT :start, :limit
      `,{selfId:e,start:t,limit:r});return o(),s}}(0,i.ensureServerEntryExports)([o]),(0,r.registerServerReference)("983baa83e0a03e99625a9bdc94f449d6c178d96c",o)},71116:(e,s,t)=>{"use strict";t.d(s,{P:()=>a});var r=t(71615),n=t(58585),i=t(43137);let o=({method:e="POST",body:s,url:t="/api/selfies",contentType:r="application/x-www-form-urlencoded",signal:n,cache:i,cacheTags:o=[]},a=null)=>fetch(`https://travel-api.kupfer.es${t}`,{signal:n,next:{cache:i,tags:o},method:e??"POST",headers:{...!1===r?{}:{"Content-Type":r},...a?{Authorization:`Bearer ${a}`}:{}},body:s?s instanceof FormData?s:new URLSearchParams(s).toString():void 0,credentials:"include"}).then(e=>{let s=e.status,t=e.ok;return e.json().then(e=>{if(t)return e.status=s,e;if(e)throw{...e,status:s};throw{success:0,status:s,responseData:e}})}),a=e=>o(e,r.cookies().get("token")?.value??null).catch(e=>{throw e?.responseData?401===e.status&&(0,n.redirect)("/auth/logout"+(0,i.L7)({status:e.status})):console.error("NO RESPONSE DATA",e),e}).then(i.xO)},73881:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>n});var r=t(66621);let n=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,r.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]},99849:(e,s,t)=>{"use strict";t.d(s,{Z:()=>n});var r=t(17577);let n=r.forwardRef(function({title:e,titleId:s,...t},n){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},t),e?r.createElement("title",{id:s},e):null,r.createElement("path",{d:"M2.5 3A1.5 1.5 0 0 0 1 4.5v.793c.026.009.051.02.076.032L7.674 8.51c.206.1.446.1.652 0l6.598-3.185A.755.755 0 0 1 15 5.293V4.5A1.5 1.5 0 0 0 13.5 3h-11Z"}),r.createElement("path",{d:"M15 6.954 8.978 9.86a2.25 2.25 0 0 1-1.956 0L1 6.954V11.5A1.5 1.5 0 0 0 2.5 13h11a1.5 1.5 0 0 0 1.5-1.5V6.954Z"}))})},32226:(e,s,t)=>{"use strict";t.d(s,{Z:()=>n});var r=t(17577);let n=r.forwardRef(function({title:e,titleId:s,...t},n){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},t),e?r.createElement("title",{id:s},e):null,r.createElement("path",{fillRule:"evenodd",d:"M14 6a4 4 0 0 1-4.899 3.899l-1.955 1.955a.5.5 0 0 1-.353.146H5v1.5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1-.5-.5v-2.293a.5.5 0 0 1 .146-.353l3.955-3.955A4 4 0 1 1 14 6Zm-4-2a.75.75 0 0 0 0 1.5.5.5 0 0 1 .5.5.75.75 0 0 0 1.5 0 2 2 0 0 0-2-2Z",clipRule:"evenodd"}))})}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[948,615,272,621,296],()=>t(95943));module.exports=r})();