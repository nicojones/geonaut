(()=>{var e={};e.id=227,e.ids=[227],e.modules={62849:e=>{function t(e){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=62849,e.exports=t},47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},41808:e=>{"use strict";e.exports=require("net")},71017:e=>{"use strict";e.exports=require("path")},77282:e=>{"use strict";e.exports=require("process")},12781:e=>{"use strict";e.exports=require("stream")},71576:e=>{"use strict";e.exports=require("string_decoder")},39512:e=>{"use strict";e.exports=require("timers")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},28878:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>f,originalPathname:()=>b,pages:()=>l,routeModule:()=>u,tree:()=>c}),s(51590),s(51895),s(35866),s(79109),s(11930);var r=s(23191),a=s(88716),n=s(37922),i=s.n(n),d=s(95231),o={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>d[e]);s.d(t,o);let c=["",{children:["(selfies)",{children:["discover",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,51590)),"/Users/pulze/Documents/Projects/travel/src/app/(selfies)/discover/page.tsx"]}]},{loading:[()=>Promise.resolve().then(s.bind(s,51895)),"/Users/pulze/Documents/Projects/travel/src/app/(selfies)/discover/loading.tsx"]}]},{"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,79109)),"/Users/pulze/Documents/Projects/travel/src/app/layout.tsx"],loading:[()=>Promise.resolve().then(s.bind(s,11930)),"/Users/pulze/Documents/Projects/travel/src/app/loading.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],l=["/Users/pulze/Documents/Projects/travel/src/app/(selfies)/discover/page.tsx"],b="/(selfies)/discover/page",f={require:s,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(selfies)/discover/page",pathname:"/discover",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},28505:(e,t,s)=>{let r={"80065baa979c618e9cef9f19a926065a6806bb7c":()=>Promise.resolve().then(s.bind(s,51590)).then(e=>e.$$ACTION_0),df1535f6b2629a718c452af132e7798bc93f65cd:()=>Promise.resolve().then(s.bind(s,70290)).then(e=>e.dbGetFollowedSelfies),f2dc88a132372190137576e6494aaac5a821d3ae:()=>Promise.resolve().then(s.bind(s,70290)).then(e=>e.$$ACTION_0),"1580697c0a61eac36e49ddce995edcbead0fe99f":()=>Promise.resolve().then(s.bind(s,15e3)).then(e=>e.getDbConnection),"3b52764d1dd1c23c7073109c963f5a2ac3be4f22":()=>Promise.resolve().then(s.bind(s,15e3)).then(e=>e.$$ACTION_0),"9d46e8c7b3176eb5a6e00e3c5105b5c8732ab5d7":()=>Promise.resolve().then(s.bind(s,15e3)).then(e=>e.namedPlaceholders),"6cb4a3b721e382ba6bcd426b329b2bf4d87e5865":()=>Promise.resolve().then(s.bind(s,73919)).then(e=>e.$$ACTION_0)};async function a(e,...t){return(await r[e]()).apply(null,t)}e.exports={"80065baa979c618e9cef9f19a926065a6806bb7c":a.bind(null,"80065baa979c618e9cef9f19a926065a6806bb7c"),df1535f6b2629a718c452af132e7798bc93f65cd:a.bind(null,"df1535f6b2629a718c452af132e7798bc93f65cd"),f2dc88a132372190137576e6494aaac5a821d3ae:a.bind(null,"f2dc88a132372190137576e6494aaac5a821d3ae"),"1580697c0a61eac36e49ddce995edcbead0fe99f":a.bind(null,"1580697c0a61eac36e49ddce995edcbead0fe99f"),"3b52764d1dd1c23c7073109c963f5a2ac3be4f22":a.bind(null,"3b52764d1dd1c23c7073109c963f5a2ac3be4f22"),"9d46e8c7b3176eb5a6e00e3c5105b5c8732ab5d7":a.bind(null,"9d46e8c7b3176eb5a6e00e3c5105b5c8732ab5d7"),"6cb4a3b721e382ba6bcd426b329b2bf4d87e5865":a.bind(null,"6cb4a3b721e382ba6bcd426b329b2bf4d87e5865")}},71087:(e,t,s)=>{let r={"4f35886507c36e4ad4dd50b8e7bea9f60ebddec5":()=>Promise.resolve().then(s.bind(s,91823)).then(e=>e.$$ACTION_0),b1a41dc2655d851f110a3d69243a3ac2141b1080:()=>Promise.resolve().then(s.bind(s,91823)).then(e=>e.fetchComments),"5692b1ddfa574de66f333084358053296041dcd1":()=>Promise.resolve().then(s.bind(s,1064)).then(e=>e.$$ACTION_0),a07630e77e02637849043dfe92df4063862c46c7:()=>Promise.resolve().then(s.bind(s,1064)).then(e=>e.searchAll),d9e397464a7b483fdb64e6b1b2077a5960e840e0:()=>Promise.resolve().then(s.bind(s,1064)).then(e=>e.getSearchResults),bdfee48ae750ffa93f9a762ed393c43dfbf10d0a:()=>Promise.resolve().then(s.bind(s,1635)).then(e=>e.$$ACTION_0),e0452359b773ffa19b2ee032affea0c6869bfe57:()=>Promise.resolve().then(s.bind(s,1635)).then(e=>e.saveEditSelfie)};async function a(e,...t){return(await r[e]()).apply(null,t)}e.exports={"4f35886507c36e4ad4dd50b8e7bea9f60ebddec5":a.bind(null,"4f35886507c36e4ad4dd50b8e7bea9f60ebddec5"),b1a41dc2655d851f110a3d69243a3ac2141b1080:a.bind(null,"b1a41dc2655d851f110a3d69243a3ac2141b1080"),"5692b1ddfa574de66f333084358053296041dcd1":a.bind(null,"5692b1ddfa574de66f333084358053296041dcd1"),a07630e77e02637849043dfe92df4063862c46c7:a.bind(null,"a07630e77e02637849043dfe92df4063862c46c7"),d9e397464a7b483fdb64e6b1b2077a5960e840e0:a.bind(null,"d9e397464a7b483fdb64e6b1b2077a5960e840e0"),bdfee48ae750ffa93f9a762ed393c43dfbf10d0a:a.bind(null,"bdfee48ae750ffa93f9a762ed393c43dfbf10d0a"),e0452359b773ffa19b2ee032affea0c6869bfe57:a.bind(null,"e0452359b773ffa19b2ee032affea0c6869bfe57")}},50610:(e,t,s)=>{Promise.resolve().then(s.bind(s,9131)),Promise.resolve().then(s.t.bind(s,92481,23)),Promise.resolve().then(s.t.bind(s,79404,23)),Promise.resolve().then(s.bind(s,85999)),Promise.resolve().then(s.bind(s,48221)),Promise.resolve().then(s.bind(s,35209)),Promise.resolve().then(s.bind(s,28003)),Promise.resolve().then(s.bind(s,13294)),Promise.resolve().then(s.bind(s,10006)),Promise.resolve().then(s.bind(s,3952)),Promise.resolve().then(s.bind(s,38911)),Promise.resolve().then(s.bind(s,47112)),Promise.resolve().then(s.bind(s,68813)),Promise.resolve().then(s.bind(s,26733)),Promise.resolve().then(s.bind(s,88313)),Promise.resolve().then(s.bind(s,59805)),Promise.resolve().then(s.bind(s,66009)),Promise.resolve().then(s.bind(s,79951)),Promise.resolve().then(s.bind(s,71131))},51895:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s(19510),a=s(29098);function n(){return r.jsx(a.h2,{})}},51590:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$ACTION_0:()=>b,default:()=>f,metadata:()=>c});var r=s(19510),a=s(24330);s(60166);var n=s(68678),i=s(70290),d=s(60214),o=s(73919);let c={title:"discover - geonaut",description:"latest posts by those you're interested in"};var l=(0,a.j)("80065baa979c618e9cef9f19a926065a6806bb7c",b);async function b(e){let t=await (0,o.getUserFromCookie)(),s=await (0,i.dbGetFollowedSelfies)({selfId:t?.id,skip:e,limit:10});return(0,d.Pr)(s,10,"discover")}async function f(){let e=await l(0);return r.jsx(n.Db,{initialSelfies:e.selfies,header:e.title,fetcher:e.more?l:void 0})}},70290:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$ACTION_0:()=>d,dbGetFollowedSelfies:()=>i});var r=s(24330);s(60166);var a=s(15e3),n=s(40618);let i=(0,r.j)("f2dc88a132372190137576e6494aaac5a821d3ae",d);async function d({selfId:e=0,skip:t=0,limit:s=10}){let[r,n]=await (0,a.getDbConnection)(),[i,d]=await r.query(`
        SELECT
            'selfie' AS 'type',
            COALESCE (lc.loves, 0) AS loves,
            IF(l.user_id = :selfId, 1, 0) AS love,
            -- IF(f.follower = :selfId, 1, 0) AS following,
            s.*
        FROM
            follow f
        RIGHT JOIN selfies_with_user s ON s.user_id = f.followed
        LEFT JOIN love_count lc ON lc.selfie_id = s.id
        LEFT JOIN love l ON s.id = l.selfie_id AND l.user_id = :selfId

        WHERE
            f.follower = :selfId
      ORDER BY s.added_on DESC LIMIT :start, :limit
      `,{selfId:e,start:t,limit:s});return n(),i}(0,n.h)([i]),(0,r.j)("df1535f6b2629a718c452af132e7798bc93f65cd",i)},15e3:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$ACTION_0:()=>l,getDbConnection:()=>c,namedPlaceholders:()=>b});var r=s(24330);s(60166);var a=s(69518),n=s(30001),i=s.n(n),d=s(40618);let o=a.createPool({host:process.env.DB_HOST??"",user:process.env.DB_USER??"",database:process.env.DB_NAME??"",password:process.env.DB_PASS??"",...process.env.DB_PORT?{port:+process.env.DB_PORT}:{},waitForConnections:!0,connectionLimit:10,maxIdle:10,idleTimeout:6e4,queueLimit:0,enableKeepAlive:!0,keepAliveInitialDelay:0,namedPlaceholders:!0}),c=(0,r.j)("3b52764d1dd1c23c7073109c963f5a2ac3be4f22",l);async function l(){let e=await o.getConnection();return[e,()=>{o.releaseConnection(e)}]}let b=i()();(0,d.h)([c,b]),(0,r.j)("1580697c0a61eac36e49ddce995edcbead0fe99f",c),(0,r.j)("9d46e8c7b3176eb5a6e00e3c5105b5c8732ab5d7",b)},73919:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$ACTION_0:()=>d,getUserFromCookie:()=>i});var r=s(24330);s(60166);var a=s(71615),n=s(76283);let i=(0,r.j)("6cb4a3b721e382ba6bcd426b329b2bf4d87e5865",d);async function d(){let e=a.cookies().get("token")?.value??null;return(0,n.J)(e)}},73881:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s(66621);let a=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,r.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[948,615,272,621,369,296],()=>s(28878));module.exports=r})();