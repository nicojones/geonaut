(()=>{var e={};e.id=931,e.ids=[931],e.modules={62849:e=>{function s(e){var s=Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}s.keys=()=>[],s.resolve=s,s.id=62849,e.exports=s},47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},41808:e=>{"use strict";e.exports=require("net")},71017:e=>{"use strict";e.exports=require("path")},77282:e=>{"use strict";e.exports=require("process")},12781:e=>{"use strict";e.exports=require("stream")},71576:e=>{"use strict";e.exports=require("string_decoder")},39512:e=>{"use strict";e.exports=require("timers")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},9557:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>a.a,__next_app__:()=>f,originalPathname:()=>b,pages:()=>c,routeModule:()=>u,tree:()=>l}),t(35480),t(79109),t(11930),t(35866);var r=t(23191),i=t(88716),d=t(37922),a=t.n(d),n=t(95231),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);t.d(s,o);let l=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,35480)),"/Users/pulze/Documents/Projects/travel/src/app/page.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,79109)),"/Users/pulze/Documents/Projects/travel/src/app/layout.tsx"],loading:[()=>Promise.resolve().then(t.bind(t,11930)),"/Users/pulze/Documents/Projects/travel/src/app/loading.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["/Users/pulze/Documents/Projects/travel/src/app/page.tsx"],b="/page",f={require:t,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},12136:(e,s,t)=>{let r={"3ac78110b1b4823306d06b05873f1852c877f362":()=>Promise.resolve().then(t.bind(t,35480)).then(e=>e.$$ACTION_0),"983baa83e0a03e99625a9bdc94f449d6c178d96c":()=>Promise.resolve().then(t.bind(t,29126)).then(e=>e.dbGetSelfies),daa99a2f9dd7c05e33652ec8b77fa9221c06d7c8:()=>Promise.resolve().then(t.bind(t,29126)).then(e=>e.$$ACTION_0),"1580697c0a61eac36e49ddce995edcbead0fe99f":()=>Promise.resolve().then(t.bind(t,15e3)).then(e=>e.getDbConnection),"3b52764d1dd1c23c7073109c963f5a2ac3be4f22":()=>Promise.resolve().then(t.bind(t,15e3)).then(e=>e.$$ACTION_0),"9d46e8c7b3176eb5a6e00e3c5105b5c8732ab5d7":()=>Promise.resolve().then(t.bind(t,15e3)).then(e=>e.namedPlaceholders),"6cb4a3b721e382ba6bcd426b329b2bf4d87e5865":()=>Promise.resolve().then(t.bind(t,73919)).then(e=>e.$$ACTION_0)};async function i(e,...s){return(await r[e]()).apply(null,s)}e.exports={"3ac78110b1b4823306d06b05873f1852c877f362":i.bind(null,"3ac78110b1b4823306d06b05873f1852c877f362"),"983baa83e0a03e99625a9bdc94f449d6c178d96c":i.bind(null,"983baa83e0a03e99625a9bdc94f449d6c178d96c"),daa99a2f9dd7c05e33652ec8b77fa9221c06d7c8:i.bind(null,"daa99a2f9dd7c05e33652ec8b77fa9221c06d7c8"),"1580697c0a61eac36e49ddce995edcbead0fe99f":i.bind(null,"1580697c0a61eac36e49ddce995edcbead0fe99f"),"3b52764d1dd1c23c7073109c963f5a2ac3be4f22":i.bind(null,"3b52764d1dd1c23c7073109c963f5a2ac3be4f22"),"9d46e8c7b3176eb5a6e00e3c5105b5c8732ab5d7":i.bind(null,"9d46e8c7b3176eb5a6e00e3c5105b5c8732ab5d7"),"6cb4a3b721e382ba6bcd426b329b2bf4d87e5865":i.bind(null,"6cb4a3b721e382ba6bcd426b329b2bf4d87e5865")}},30324:(e,s,t)=>{let r={"4f35886507c36e4ad4dd50b8e7bea9f60ebddec5":()=>Promise.resolve().then(t.bind(t,91823)).then(e=>e.$$ACTION_0),b1a41dc2655d851f110a3d69243a3ac2141b1080:()=>Promise.resolve().then(t.bind(t,91823)).then(e=>e.fetchComments),"5692b1ddfa574de66f333084358053296041dcd1":()=>Promise.resolve().then(t.bind(t,1064)).then(e=>e.$$ACTION_0),a07630e77e02637849043dfe92df4063862c46c7:()=>Promise.resolve().then(t.bind(t,1064)).then(e=>e.searchAll),d9e397464a7b483fdb64e6b1b2077a5960e840e0:()=>Promise.resolve().then(t.bind(t,1064)).then(e=>e.getSearchResults),"06c3c0885ee10b0d6b95556dbef181c4f6360a14":()=>Promise.resolve().then(t.bind(t,31915)).then(e=>e.publishSelfie),b07d83010229c3b0050b55aca3fc624cc0b9f40b:()=>Promise.resolve().then(t.bind(t,31915)).then(e=>e.$$ACTION_0)};async function i(e,...s){return(await r[e]()).apply(null,s)}e.exports={"4f35886507c36e4ad4dd50b8e7bea9f60ebddec5":i.bind(null,"4f35886507c36e4ad4dd50b8e7bea9f60ebddec5"),b1a41dc2655d851f110a3d69243a3ac2141b1080:i.bind(null,"b1a41dc2655d851f110a3d69243a3ac2141b1080"),"5692b1ddfa574de66f333084358053296041dcd1":i.bind(null,"5692b1ddfa574de66f333084358053296041dcd1"),a07630e77e02637849043dfe92df4063862c46c7:i.bind(null,"a07630e77e02637849043dfe92df4063862c46c7"),d9e397464a7b483fdb64e6b1b2077a5960e840e0:i.bind(null,"d9e397464a7b483fdb64e6b1b2077a5960e840e0"),"06c3c0885ee10b0d6b95556dbef181c4f6360a14":i.bind(null,"06c3c0885ee10b0d6b95556dbef181c4f6360a14"),b07d83010229c3b0050b55aca3fc624cc0b9f40b:i.bind(null,"b07d83010229c3b0050b55aca3fc624cc0b9f40b")}},50610:(e,s,t)=>{Promise.resolve().then(t.bind(t,9131)),Promise.resolve().then(t.t.bind(t,92481,23)),Promise.resolve().then(t.t.bind(t,79404,23)),Promise.resolve().then(t.bind(t,85999)),Promise.resolve().then(t.bind(t,1121)),Promise.resolve().then(t.bind(t,35209)),Promise.resolve().then(t.bind(t,28003)),Promise.resolve().then(t.bind(t,13294)),Promise.resolve().then(t.bind(t,10006)),Promise.resolve().then(t.bind(t,3952)),Promise.resolve().then(t.bind(t,38911)),Promise.resolve().then(t.bind(t,47112)),Promise.resolve().then(t.bind(t,68813)),Promise.resolve().then(t.bind(t,26733)),Promise.resolve().then(t.bind(t,88313)),Promise.resolve().then(t.bind(t,59805)),Promise.resolve().then(t.bind(t,66009)),Promise.resolve().then(t.bind(t,79951)),Promise.resolve().then(t.bind(t,71131))},35480:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$ACTION_0:()=>b,default:()=>f,metadata:()=>l});var r=t(19510),i=t(24330);t(60166);var d=t(68678),a=t(29126),n=t(60214),o=t(73919);let l={title:"latest - geonaut",description:"the latest and greatest posts on the platform"};var c=(0,i.j)("3ac78110b1b4823306d06b05873f1852c877f362",b);async function b(e){let s=await (0,o.getUserFromCookie)(),t=await (0,a.dbGetSelfies)({selfId:s?.id,skip:e,limit:10});return(0,n.Pr)(t,10)}async function f(){let e=await c(0);return r.jsx(d.Db,{initialSelfies:e.selfies,header:"geonaut",fetcher:e.more?c:void 0})}},29126:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$ACTION_0:()=>n,dbGetSelfies:()=>a});var r=t(24330);t(60166);var i=t(15e3),d=t(40618);let a=(0,r.j)("daa99a2f9dd7c05e33652ec8b77fa9221c06d7c8",n);async function n({selfId:e=0,userId:s=0,skip:t=0,limit:r=10}){let[d,a]=await (0,i.getDbConnection)();if(s){let[i,n]=await d.query(`
      SELECT
              s.id, s.user_id, s.active_hash, s.hash, s.title, s.short_desc, s.selfie_date,
              s.selfie_place, s.lat, s.lng, s.selfietype_id, s.added_on, s.edited_on,
              s.lc_color, s.me_color, s.lc_brightness, s.me_brightness, s.username, s.name, s.possessive,
              IF(l.user_id = :selfId, 1, 0) AS love,
              -- IF(f.follower = :selfId, 1, 0) AS following,
              'profile' AS 'type',
              COALESCE(lc.loves, 0) as loves
      FROM selfies_with_user s
      LEFT JOIN love l ON (s.id = l.selfie_id AND :selfId = l.user_id)
      -- LEFT JOIN follow f ON s.user_id = f.followed
      LEFT JOIN love_count lc ON lc.selfie_id = s.id
      WHERE (s.user_id = :userId)
      GROUP BY s.id, s.user_id, s.active_hash, s.hash, s.title, s.short_desc, s.selfie_date,
                s.selfie_place, s.lat, s.lng, s.selfietype_id, s.added_on, s.edited_on,
                s.lc_color, s.lc_brightness, s.me_color, s.me_brightness, s.username, s.name, s.possessive,
                'type', love, loves
      ORDER BY s.selfie_date DESC, s.added_on DESC LIMIT :skip, :limit
      `,{userId:s,selfId:e,skip:t,limit:r});return a(),i}{let[s,i]=await d.query(`
        SELECT
              s.id, s.user_id, s.active_hash, s.hash, s.title, s.short_desc, s.selfie_date,
              s.selfie_place, s.lat, s.lng, s.selfietype_id, s.added_on, s.edited_on,
              s.lc_color, s.me_color, s.lc_brightness, s.me_brightness, s.username, s.name, s.possessive,
              IF(l.user_id = :selfId, 1, 0) AS love,
              -- IF(f.follower = :selfId, 1, 0) AS following,
              'selfie' AS 'type',
              COALESCE(lc.loves, 0) as loves
        FROM selfies_with_user s
        LEFT JOIN love l ON (s.id = l.selfie_id AND :selfId = l.user_id)
        -- LEFT JOIN follow f ON s.user_id = f.followed
        LEFT JOIN love_count lc ON lc.selfie_id = s.id
        GROUP BY s.id, s.user_id, s.active_hash, s.hash, s.title, s.short_desc, s.selfie_date,
                  s.selfie_place, s.lat, s.lng, s.selfietype_id, s.added_on, s.edited_on,
                  s.lc_color, s.lc_brightness, s.me_color, s.me_brightness,
                  s.username, s.name, s.possessive,
                  'type', love, loves
        ORDER BY s.added_on DESC LIMIT :start, :limit
      `,{selfId:e,start:t,limit:r});return a(),s}}(0,d.h)([a]),(0,r.j)("983baa83e0a03e99625a9bdc94f449d6c178d96c",a)},15e3:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$ACTION_0:()=>b,getDbConnection:()=>c,namedPlaceholders:()=>f});var r=t(24330);t(60166);var i=t(69518),d=t(30001),a=t.n(d),n=t(40618);let o=global;o.dbPool=o.dbPool||i.createPool({host:process.env.DB_HOST??"",user:process.env.DB_USER??"",database:process.env.DB_NAME??"",password:process.env.DB_PASS??"",...process.env.DB_PORT?{port:+process.env.DB_PORT}:{},waitForConnections:!0,connectionLimit:10,maxIdle:10,idleTimeout:6e4,queueLimit:0,enableKeepAlive:!0,keepAliveInitialDelay:0,namedPlaceholders:!0});let l=o.dbPool,c=(0,r.j)("3b52764d1dd1c23c7073109c963f5a2ac3be4f22",b);async function b(){let e=await l.getConnection();return[e,()=>{l.releaseConnection(e),e.release()}]}let f=a()();(0,n.h)([c,f]),(0,r.j)("1580697c0a61eac36e49ddce995edcbead0fe99f",c),(0,r.j)("9d46e8c7b3176eb5a6e00e3c5105b5c8732ab5d7",f)},73919:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$ACTION_0:()=>n,getUserFromCookie:()=>a});var r=t(24330);t(60166);var i=t(71615),d=t(76283);let a=(0,r.j)("6cb4a3b721e382ba6bcd426b329b2bf4d87e5865",n);async function n(){let e=i.cookies().get("token")?.value??null;return(0,d.J)(e)}},73881:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>i});var r=t(66621);let i=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,r.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]}};var s=require("../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[948,615,842,621,369,617],()=>t(9557));module.exports=r})();