(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[220],{61066:function(e,t,n){Promise.resolve().then(n.bind(n,27776)),Promise.resolve().then(n.bind(n,27421)),Promise.resolve().then(n.bind(n,19649)),Promise.resolve().then(n.bind(n,20061))},20061:function(e,t,n){"use strict";n.d(t,{SingleSelfieContextWrapper:function(){return u}});var r=n(57437),s=n(2265);n(74590);var o=(0,n(58064).$)("e4af2e0703b305da595db477e8db970b29c70bc0"),h=n(42874),i=n(50461),l=n(70603);let u=e=>{let{children:t,initialData:n}=e,[u,a]=(0,s.useState)(n),{api:c,user:d}=(0,i.useJwtTokenContext)(),[f,b]=(0,s.useState)({prev:null,next:null}),{prev:v,next:p}=f,w=(0,s.useRef)({[n.hash]:n}),x=e=>{if(w.current[e]){a(w.current[e]),window.history.pushState(null,"","/s/".concat(e));return}o(e,null==d?void 0:d.id,!0).then(t=>{if(t)w.current[t.hash]=t,a(t),window.history.pushState(null,"","/s/".concat(e));else throw Error("No selfie with hash ".concat(e))})};(0,s.useEffect)(()=>{let e=new AbortController;return c({body:{},url:"/api/next/".concat(u.hash),cacheTags:[u.hash],signal:e.signal}).then(h.xO).then(e=>{let{prev:t,next:n}=e;t&&(w.current[t.hash]=t),n&&(w.current[n.hash]=n),b({prev:t,next:n})}),()=>e.abort()},[u.hash]);let _=(0,s.useMemo)(()=>({prev:v,next:p,selfie:u,loadSelfie:x,_insideContext_:!0}),[v,p,u]);return(0,r.jsx)(l.R.Provider,{value:_,children:t})}}},function(e){e.O(0,[601,706,872,415,119,46,247,186,191,794,971,23,744],function(){return e(e.s=61066)}),_N_E=e.O()}]);