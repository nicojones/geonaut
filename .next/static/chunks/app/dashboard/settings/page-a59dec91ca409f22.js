(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[455],{19474:function(e,s,l){Promise.resolve().then(l.bind(l,47972)),Promise.resolve().then(l.t.bind(l,38173,23)),Promise.resolve().then(l.t.bind(l,231,23)),Promise.resolve().then(l.bind(l,27776)),Promise.resolve().then(l.bind(l,48415)),Promise.resolve().then(l.bind(l,65143)),Promise.resolve().then(l.bind(l,47993)),Promise.resolve().then(l.bind(l,13205)),Promise.resolve().then(l.bind(l,41584)),Promise.resolve().then(l.bind(l,67133)),Promise.resolve().then(l.bind(l,98384)),Promise.resolve().then(l.bind(l,77346)),Promise.resolve().then(l.bind(l,79627)),Promise.resolve().then(l.bind(l,55050)),Promise.resolve().then(l.bind(l,84490)),Promise.resolve().then(l.bind(l,95401)),Promise.resolve().then(l.bind(l,99525)),Promise.resolve().then(l.bind(l,11683)),Promise.resolve().then(l.bind(l,90173)),Promise.resolve().then(l.bind(l,302)),Promise.resolve().then(l.bind(l,27421)),Promise.resolve().then(l.bind(l,19649)),Promise.resolve().then(l.bind(l,67431)),Promise.resolve().then(l.bind(l,62466)),Promise.resolve().then(l.bind(l,32355)),Promise.resolve().then(l.bind(l,67358)),Promise.resolve().then(l.bind(l,81138)),Promise.resolve().then(l.bind(l,44692)),Promise.resolve().then(l.bind(l,96905))},48415:function(e,s,l){"use strict";l.d(s,{SettingsForm:function(){return k}});var r=l(57437),n=l(90372),i=l(85804),a=l(17549),t=l(37585),o=l(23247),d=l(98920),c=l(57002),h=l(69025),m=l(41889),u=l(66648),x=l(2265),v=l(27776),p=l(26794),f=l(70191),j=l(42874),g=l(67185),b=l(89649),Z=l(68834),w=l(47279),P=l(56800),y=l.n(P);l(74590);var N=(0,l(58064).$)("983baa83e0a03e99625a9bdc94f449d6c178d96c");let C=e=>{var s;let{value:l,onChange:n}=e,{user:i}=(0,f.Rv)(),[a,d]=(0,x.useState)({loaded:null,data:null});(0,x.useEffect)(()=>{!1===a.loaded&&(a.data&&d(e=>({...e,loaded:!0})),N({selfId:null==i?void 0:i.id,userId:null==i?void 0:i.id,skip:0,limit:1e5}).then(e=>{d({loaded:!0,data:e})}))},[a]);let c=e=>{d(e=>({...e,loaded:null})),n(e)};return(0,r.jsxs)(t.Z,{children:[(0,r.jsx)(o.Z,{children:"profile picture"}),null===a.loaded?(0,r.jsxs)(b.Z,{variant:"plain",className:"fric space-x-2",onClick:()=>d(e=>({...e,loaded:!1})),children:[(0,r.jsx)(u.default,{className:"w-36 aspect-[4/3] shrink-0 grow-0 rounded",src:(0,j.iQ)({hash:l},!0),width:666,height:500,alt:"Profile picture"}),(0,r.jsx)("span",{children:"change"})]}):(0,r.jsx)(Z.Z,{className:"inline-block w-full",children:a.loaded?(null!==(s=a.data)&&void 0!==s?s:[]).map(e=>(0,r.jsx)(u.default,{className:y()("float-left transition-opacity hover:opacity-100 cursor-pointer w-4/12 md:w-3/12 lg:w-2/12",{"opacity-40":e.hash!==l}),src:(0,j.iQ)(e,!0),width:250,height:250,alt:e.title,onClick:()=>c(e.hash)},e.hash)):(0,j.w6)(0,24).map(e=>(0,r.jsx)("span",{className:" aspect-square w-4/12 md:w-3/12 lg:w-2/12 float-left relative p-1",children:(0,r.jsx)(w.Z,{className:"m-1 w-[calc(100%-8px)] h-[calc(100%-8px)]",animation:"wave"},e)},e))})]})},_=e=>{let{disabled:s=!1,loading:l=!1}=e;return(0,r.jsx)(b.Z,{type:"submit",variant:"solid",size:"lg",className:"w-full",disabled:s,loading:l,children:"save"})},k=e=>{var s,l;let{settings:b}=e,{api:Z,setJwt:w}=(0,f.Rv)(),[P,y]=(0,x.useState)(b),[N,k]=(0,x.useState)({}),[E,O]=(0,x.useState)(!1),R=Object.keys(N).length>0,S=e=>s=>y(l=>({...l,[e]:s.target.value})),A=(0,x.useCallback)(e=>{e.preventDefault(),O(!0),Z({method:"POST",body:P,url:"/api/settings/save"}).then(j.xO).then(e=>{(0,v.toast)(e.message),w(e.token)}).catch(e=>{v.toast.error(e.message)}).finally(()=>O(!1))},[Z,P,w]);return(0,x.useLayoutEffect)(()=>{g.L4.safeParseAsync(P).then(e=>{e.success?k({}):k((0,j.Uo)(e.error.issues))}).catch(e=>{console.error(e)})},[P]),(0,r.jsxs)("form",{onSubmit:A,className:"flex flex-col space-y-4",children:[(0,r.jsxs)(t.Z,{error:!!N.name,children:[(0,r.jsx)(o.Z,{children:"full name"}),(0,r.jsx)(d.ZP,{value:P.name,onChange:S("name"),startDecorator:(0,r.jsx)(n.Z,{className:"size-3"})}),N.name&&(0,r.jsx)(c.Z,{children:N.name}),(0,r.jsx)(c.Z,{children:"enter your full name as you'd like people to see it"})]}),(0,r.jsxs)(t.Z,{error:!!N.username,children:[(0,r.jsx)(o.Z,{children:"username"}),(0,r.jsx)(d.ZP,{value:P.username,onChange:S("username"),startDecorator:"@"}),N.username&&(0,r.jsx)(c.Z,{children:N.username}),(0,r.jsx)(c.Z,{children:"this will be your username, @handle, and in the URL"})]}),(0,r.jsxs)(t.Z,{error:!!N.email,children:[(0,r.jsx)(o.Z,{children:"email"}),(0,r.jsx)(d.ZP,{value:P.email,onChange:S("email"),type:"email",startDecorator:(0,r.jsx)(i.Z,{className:"size-3"})}),N.email&&(0,r.jsx)(c.Z,{children:N.email}),(0,r.jsxs)(c.Z,{children:[(0,r.jsx)("i",{children:"nobody"}),"\xa0can see this"]})]}),(0,r.jsxs)(t.Z,{error:!!N.short_desc,sx:{gridColumn:"1/-1"},children:[(0,r.jsx)(o.Z,{children:"summary"}),(0,r.jsx)(d.ZP,{value:P.short_desc,onChange:S("short_desc")}),N.short_desc&&(0,r.jsx)(c.Z,{children:N.short_desc})]}),(0,r.jsxs)(t.Z,{error:!!N.gender,sx:{gridColumn:"1/-1"},children:[(0,r.jsx)(o.Z,{children:"pronouns"}),(0,r.jsxs)(h.Z,{name:"gender",value:P.gender,onChange:(e,s)=>y(e=>({...e,gender:null!=s?s:0})),children:[(0,r.jsx)(m.Z,{value:0,children:"neutral (they / them / their)"}),(0,r.jsx)(m.Z,{value:1,children:"male (he / him / his)"}),(0,r.jsx)(m.Z,{value:2,children:"female (she / her / hers)"})]}),N.gender&&(0,r.jsx)(c.Z,{children:N.gender})]}),(0,r.jsxs)("div",{className:"flex flex-col space-y-4 lg:flex-row lg:space-x-4 lg:space-y-0",children:[(0,r.jsxs)(t.Z,{error:!!N.password,className:"grow",children:[(0,r.jsx)(o.Z,{children:"password"}),(0,r.jsx)(d.ZP,{value:null!==(s=P.password)&&void 0!==s?s:"",onChange:S("password"),startDecorator:(0,r.jsx)(a.Z,{className:"size-3"}),type:"password",placeholder:"********"}),N.password&&(0,r.jsx)(c.Z,{children:N.password}),(0,r.jsx)(c.Z,{children:"(if you want to change it)"})]}),(0,r.jsxs)(t.Z,{error:!!N.confirm,className:"grow",children:[(0,r.jsx)(o.Z,{children:"confirm password"}),(0,r.jsx)(d.ZP,{value:null!==(l=P.confirm)&&void 0!==l?l:"",onChange:S("confirm"),startDecorator:(0,r.jsx)(a.Z,{className:"size-3"}),type:"password",placeholder:"********"}),N.confirm&&(0,r.jsx)(c.Z,{children:N.confirm}),(0,r.jsx)(c.Z,{children:P.password?"please confirm the password":"(if you want to change it)"})]})]}),(0,r.jsxs)("div",{className:"flex flex-col space-y-4 lg:flex-row lg:space-x-4 lg:space-y-0",children:[(0,r.jsx)(p.uN,{onClick:()=>y(e=>({...e,bell_position:"menu"})),selected:"menu"===P.bell_position,children:(0,r.jsx)(u.default,{src:"/images/icons/generic/bell-menu.png",alt:"Notification bell in the menu",width:250,height:250})}),(0,r.jsx)(p.uN,{onClick:()=>y(e=>({...e,bell_position:"top"})),selected:"top"===P.bell_position,children:(0,r.jsx)(u.default,{src:"/images/icons/generic/bell-top.png",alt:"Notification bell in the top header",width:250,height:250})})]}),(0,r.jsx)("hr",{}),(0,r.jsx)(C,{value:P.profile_pic,onChange:e=>y(s=>({...s,profile_pic:e}))}),(0,r.jsx)(_,{disabled:R,loading:E})]})}},85804:function(e,s,l){"use strict";var r=l(2265);let n=r.forwardRef(function({title:e,titleId:s,...l},n){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},l),e?r.createElement("title",{id:s},e):null,r.createElement("path",{d:"M2.5 3A1.5 1.5 0 0 0 1 4.5v.793c.026.009.051.02.076.032L7.674 8.51c.206.1.446.1.652 0l6.598-3.185A.755.755 0 0 1 15 5.293V4.5A1.5 1.5 0 0 0 13.5 3h-11Z"}),r.createElement("path",{d:"M15 6.954 8.978 9.86a2.25 2.25 0 0 1-1.956 0L1 6.954V11.5A1.5 1.5 0 0 0 2.5 13h11a1.5 1.5 0 0 0 1.5-1.5V6.954Z"}))});s.Z=n},17549:function(e,s,l){"use strict";var r=l(2265);let n=r.forwardRef(function({title:e,titleId:s,...l},n){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},l),e?r.createElement("title",{id:s},e):null,r.createElement("path",{fillRule:"evenodd",d:"M14 6a4 4 0 0 1-4.899 3.899l-1.955 1.955a.5.5 0 0 1-.353.146H5v1.5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1-.5-.5v-2.293a.5.5 0 0 1 .146-.353l3.955-3.955A4 4 0 1 1 14 6Zm-4-2a.75.75 0 0 0 0 1.5.5.5 0 0 1 .5.5.75.75 0 0 0 1.5 0 2 2 0 0 0-2-2Z",clipRule:"evenodd"}))});s.Z=n}},function(e){e.O(0,[601,706,872,415,119,972,46,247,186,191,794,971,23,744],function(){return e(e.s=19474)}),_N_E=e.O()}]);